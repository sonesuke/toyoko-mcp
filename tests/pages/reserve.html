<html lang="ja"><head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="robots" content="noindex, nofollow, noarchive"><!-- 検索エンジンにクロールさせない -->

<!-- 変更 #32247 START -->
<!-- Google tag (gtag.js) -->
<script type="text/javascript" async="" charset="utf-8" src="https://chat3-66.chatdealer.jp:443/chat/client.js?1742552588093"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-M5KR7Q2J"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-33NCWFH7DL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-33NCWFH7DL');
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M5KR7Q2J');</script>
<!-- End Google Tag Manager -->
<!-- 変更 #32247 END -->

    <link rel="icon" href="/favicon.ico">

    <title>宿泊予約</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.css?ver=0020">
    <!-- Bootstrap theme -->
    <link rel="stylesheet" href="/css/bootstrap-theme.min.css?ver=0020">
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link rel="stylesheet" href="/assets/css/ie10-viewport-bug-workaround.css?ver=0020">

    <!-- Custom styles for this template -->
    <link rel="stylesheet" href="/assets/fontawesome/css/all.min.css?ver=0020">
    <link rel="stylesheet" href="/assets/datepicker/css/bootstrap-datepicker3.min.css?ver=0020">
    <link rel="stylesheet" href="/assets/swiper/css/swiper.min.css?ver=0020"><!-- shop.htmlのCSS -->
    <link rel="stylesheet" href="/css/style.css?ver=0018">
    <!-- Bootstrap core JavaScript -->
    <script src="/js/jquery-2.1.1.min.js?ver=0020"></script>
    <script src="/js/jquery.mask.min.js?ver=0020"></script>
    <script src="/js/bootstrap.js?ver=0020"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="/assets/js/ie10-viewport-bug-workaround.js?ver=0020"></script>
    <script src="/js/validator.js?ver=0020"></script>
    <script src="/assets/datepicker/js/bootstrap-datepicker.min.js?ver=0020"></script>
    <script src="/assets/datepicker/js/bootstrap-datepicker.ja.js?ver=0020"></script>
    <script src="/assets/swiper/js/swiper.min.js?ver=0020"></script><!-- shop.htmlのJavaScript -->
    <script src="/js/basic.js?ver=0018"></script>
    <script src="/js/toyoko.js?ver=0018"></script>
    <script src="/js/agh.sprintf.js?ver=0018"></script>
<script src="https://aws.cardkessaiap.toyoko-inn.com/cpay/jsencrypt.min.js?ver=0020"></script><script src="https://aws.cardkessaiap.toyoko-inn.com/cpay/cpay.js?ver=0020"></script><script src="/js/toyoko_credit_card.js?ver=0020"></script><script src="/js/toyoko_credit_card_reserve.js?ver=0020"></script><script src="/js/rsrvtn_entry.js?ver=0020"></script>
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="/assets/js/ie8-responsive-file-orange.js?ver=0020"></script><![endif]-->
    <script src="/assets/js/ie-emulation-modes-warning.js?ver=0020"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js?ver=0020"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js?ver=0020"></script>
<![endif]-->

</head>

<body class="input-form body-input  logged-in" id="hotel-reserve" onload="body_onload()">

<!-- 変更 #32247 START -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M5KR7Q2J"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- 変更 #32247 END -->

    <header id="header">
        <div class="header-02 bg-primary">
            <div class="container clearfix">
                <div class="logo" style="align-items: baseline;">
                    <h1><a href="/Search/index/condition"><img src="/images/logo_new.png" alt="toyoko-inn.com東横INN" style="width: auto; height: 60px;"></a></h1>
                    <div class="wAuto flL"><span>東横INNクラブコーポレートビジネス会員サイト</span>
                </div>
                            <div class="hidden-xs hidden-md hidden-lg">xxxxxxxx <br class="hidden-sm hidden-md hidden-lg">xxxxxxxxxxx xxxxxxxxxxx 様</div>
                    </div>
                <div class="sub-logo">
                    </div>
                    </div>
                            <div class="container hidden-sm hidden-md hidden-lg">xxxxxxxxxxx <br class="hidden-sm hidden-md hidden-lg">xxxxxxxxxxx xxxxxxxxxxx 様</div>
                </div>
<div class="pankuzu_wrap hidden-xs hidden-sm visible-md visible-lg">
    <div id="pankuzu" class="container">
    </div>
</div>

    </header><!--/#header-->
<script>
// 日帰り部屋の部屋タイプコード
var ary_dayuse_room_type_id = JSON.parse('["SZ","SZK"]');

// 初期ロード処理
$(function(){

	// １部屋目の振舞い制御
	var rsrv_room_no1 = function() {
		// 一行目の氏名Object取得
		var last_name = $('#sq_1_last_name');
		var frst_name = $('#sq_1_frst_name');
		var chkd = $('#sq_1_same_subscriber').prop('checked');
		if (chkd){
			$('#sq_1_btn_club_card').hide();
			last_name.attr('readonly', true);
			frst_name.attr('readonly', true);
		}
	}
	// 確認画面から戻ってきた場合
	rsrv_room_no1();

	// onChangePayment();
	$('div[id $= eco_section]').each(function(div_idx, div_section){
 		//open_close_eco_section(div_section);
 		var div_id = $(div_section).attr('id');
 		var sqnc = div_id.replace("eco_section", "");
 		eco_click(sqnc);
 		set_enable_eco_eco_calendar_days(sqnc);
	});

	$('label[id $= disp_mmbrshp_nmbr]').each(function(lbl_idx, lbl_section) {
		if ($(this).css('display') == 'block') {
			// 姓名のreadonly制御
			var seq = (lbl_idx + 1);
			$('#sq_' + seq + '_last_name').attr('readonly',true);
			$('#sq_' + seq + '_frst_name').attr('readonly',true);
		}
	});

	// 領収書欄表示制御
	var dsply_recipt_area = function() {
		$('#recipt_area')[($('#payment').val() != '1') ? 'show' : 'hide']();
	}
	// オンラインカード決済についての表示制御
	var dsply_about_credit_payment = function() {

		if ($('#payment').val() == '3' || $('#payment').val() == '4') {

			$('#about_credit_payment').empty();			// 以前の html タグを削除する
			$('#about_credit_payment').append("<p class=\"sub-item\"><a href=\"javascript:void(0);\" onclick=\"show_receipt_faq('ja');\">オンラインカード決済について</a></p>");
			$('#about_credit_payment').show();

		} else if ($('#payment').val() == '2') {
			$('#about_credit_payment').hide();
		} else {
			$('#about_credit_payment').hide();
		}
	}

	// クレジットカードブランドイメージについての表示制御
	var dsply_credit_brand_img = function() {
		$('#online_card_img').hide();
		$('#onsite_card_img').hide();
		if ($('#payment').val() == '3' || $('#payment').val() == '4' ) {
			$('#online_card_img').show();
		} else if($('#payment').val() == '2')  {
			$('#onsite_card_img').show();
		}
	}

	dsply_recipt_area();
	dsply_about_credit_payment();
	dsply_credit_brand_img();

	// 支払方法変更による領収書欄、オンラインカード決済について表示制御
	$('#payment').on('change',function(){
		dsply_recipt_area();
		dsply_about_credit_payment();
		dsply_credit_brand_img();
	});

	// 同意チェック
	$('#agree').on('change',function(){
		var btn = document.getElementById('btn_next');
		set_enabled(btn, $(this).prop('checked') == true);
	});

	// 予約者の『姓』、又は『名』が変更された場合の処理
	reg_full_name = new RegExp('^SONEDAYUSUKE$', 'ig');
	reg_last_name = new RegExp('^SONEDA$', 'ig');

	$('#rsrv_last_name,#rsrv_frst_name').on('keyup', function() {

		// インデックスをリセット
		reg_full_name.lastIndex = 0;
		reg_last_name.lastIndex = 0;

		// 予約者『姓＋名』 <> ログイン『姓＋名』 の場合、『□予約者と同じ』を隠す
		if ( ! reg_full_name.test( $('#rsrv_last_name').val() + $('#rsrv_frst_name').val() ) || ! reg_last_name.test( $('#rsrv_last_name').val() ) ) {

			var ele_div = $('#sq_1_same_subscriber').closest('div');
			ele_div.hide();

		// 予約者『姓＋名』 = ログイン『姓＋名』 の場合、『□予約者と同じ』を表示
		} else {
			var ele_div = $('#sq_1_same_subscriber').closest('div');
			ele_div.show();
		}
	});

	// 予約者と同じ
	$('#sq_1_same_subscriber').on('change',function(){
		// 一行目の氏名Object取得
		var last_name = $('#sq_1_last_name');
		var frst_name = $('#sq_1_frst_name');
		var chkd = $('#sq_1_same_subscriber').prop('checked');
		var readonly = false;
		// 宿泊者名
		last_name.val('');
		frst_name.val('');
		// クラブ会員番号ボタンを非表示
		// 会員番号
		init_club_card_mmbrshp_nmbr('sq_1_');
		$('#sq_1_btn_club_card').show();
		if (chkd){
			$('#sq_1_btn_club_card').hide();
			var readonly = true;
			// 予約者名
			last_name.val($('#rsrv_last_name').val());
			frst_name.val($('#rsrv_frst_name').val());
			// ユーザー会員uid、会員番号
			var hddn_mmbrshp_nmbr = "";
			if (hddn_mmbrshp_nmbr != ''){
				set_club_card_mmbrshp_nmbr('sq_1_',hddn_mmbrshp_nmbr,"");
			}
		}

		$('#rsrv_last_name').attr('readonly',readonly);
		$('#rsrv_frst_name').attr('readonly',readonly);

		last_name.attr('readonly',readonly);
		frst_name.attr('readonly',readonly);
	});

	// 一括登録ボタン可否設定
	set_disable_bulk_regist();

    var hddn_checkin = $('input:hidden[name="hddn_checkin"]').val();
    var hddn_stays = $('input:hidden[name="hddn_stays"]').val();

    // 予約登録、予約変更の場合は、利用可能クーポンのみ表示
	// 自動クーポン利用可能表示設定
	disp_cpn_auto_row(hddn_checkin,hddn_stays);

	set_plan_overview(false, false);

	// cpnエラー時,cpnエリアへfocus
	focus_err_cpn();

});


//オプションを開く閉じる処理
function option_open_close(_this,sqnc) {
var option_div = $("#"+sqnc+"option_div");
if (option_div.css('display') === 'block') {
  $(_this).text('その他のオプションを開く');
  $(_this).append('<i class="ml5 glyphicon glyphicon-menu-down"></i>');
}else{
  $(_this).text('その他のオプションを閉じる');
  $(_this).append('<i class="ml5 glyphicon glyphicon-menu-up"></i>');
}
option_div.slideToggle(200);
//return false;
}

//========== add room ========================================================
function add_room(_this) {
  // get tbody
  var pc_tbody = $("#room_tbody");
  // tr count
  var rows_cnt = $(pc_tbody).children('tr').length;
  if (rows_cnt >= 9){
    alert('9室以上は追加できません。');
    return false;
  }
  var nosp = $(_this).parents().prev("div");
  // get sequence
  var pc_tbody = $(nosp).children("table").children("thead").next("tbody");
    var last_seq = parseInt(0);

  // get parent
  var pc_prnt = $(nosp).children("table");
  var pc_last = $(pc_tbody).children().last();
  var last_html = $(pc_last).html();

  // get no span id
  var no_sq_id = $("span[id^=sq_][id$=_no]:last").attr('id');

  // get last sequence
  var tmp_ary = no_sq_id.match(/sq_(\d)+_no/);
  var last_seq = tmp_ary[1];
  var new_seq = parseInt(last_seq) + 1;
  tmp_html = '<tr class="room_tr">' + last_html + '</tr>';
  // edit html set new seq id from last seq id
  var new_seq_id = 'sq_' + new_seq + '_';
  var last_seq_id = 'sq_' + last_seq + '_';
  tmp_html = tmp_html.replace(/sq_(\d)+_/g, new_seq_id);
  // append tr html
  $(tmp_html).appendTo(pc_prnt);

  var nmbr = $(pc_tbody).children("tr").length;

  $(pc_tbody).find('#' + new_seq_id + 'no').text(nmbr);
  $(pc_tbody).find('#' + new_seq_id + 'last_name').val('');
  $(pc_tbody).find('#' + new_seq_id + 'frst_name').val('');

  // 姓名の入力欄を enable
  $(pc_tbody).find('#' + new_seq_id + 'last_name').attr('readonly', false);
  $(pc_tbody).find('#' + new_seq_id + 'frst_name').attr('readonly', false);

  var last_gend = $(pc_tbody).find('[name='+ last_seq_id +'gender]:checked').val();
  $(pc_tbody).find('[name='+ new_seq_id +'gender]').val([last_gend]);

  $(pc_tbody).find('#' + new_seq_id + 'tel').val('');
  $(pc_tbody).find('#' + new_seq_id + 'lodgers').val($(pc_tbody).find('#' + last_seq_id + 'lodgers').val());
  $(pc_tbody).find('#' + new_seq_id + 'cntry').val($(pc_tbody).find('#' + last_seq_id + 'cntry').val());
  $(pc_tbody).find('#' + new_seq_id + 'check_in_time').val($(pc_tbody).find('#' + last_seq_id + 'check_in_time').val());

  // 変更 #18148 START 2020.04.13 藤野勝矢
//  $(pc_tbody).find('#' + new_seq_id + 'management_colum').val('');

  // 一番最初のお客様管理欄に何か登録されている場合
  var str_sq_1_management_colum_val = '';
  if ( $('#sq_1_management_colum').val().length > 0 ) {
    str_sq_1_management_colum_val = $('#sq_1_management_colum').val();
  }
  $(pc_tbody).find('#' + new_seq_id + 'management_colum').val(str_sq_1_management_colum_val);
  // 変更 #18148 END 2020.04.13
  $(pc_tbody).find('#' + new_seq_id + 'btnDel').prop("disabled", false);

  // 予約者と同じチェック削除
  $chkprnt = $(pc_tbody).find('#' + new_seq_id + 'same_subscriber').parent().parent();
  $chkprnt.remove();
  // 会員番号の入力・認証ボタン初期化
  init_club_card_mmbrshp_nmbr(new_seq_id);
  // ecoカレンダー初期化
  init_eco_section(new_seq_id);
  // eco利用radio click関数実行
  eco_click(new_seq_id);
  // 一括登録ボタン使用可
  set_disable_bulk_regist();

  set_plan_overview(false, false);

  return false;
}

function show_receipt_faq(curr_lcl_id) {
  $.ajax
  ({
    type: 'post',
    url: '/Ajax/show_receipt_faq',
      dataType: 'html',
        data: {
          lcl_id : curr_lcl_id
        },
      success: function(results){
      $('#modal-body-receipt-faq').empty();     // 以前の html タグを削除する
      $('#modal-body-receipt-faq').append(results);

      if ( $("#modal-tit-receipt-faq").length > 0 ) {
        $('#modal-tit-receipt-faq').empty();      // 以前の html タグを削除する
        $('#modal-tit-receipt-faq').append('オンラインカード決済について');
      }

      $('#modal_receipt_faq').modal({show:true});

      change_accordion();

      // モーダルが表示されてからの処理
      $('#modal_receipt_faq').on('shown.bs.modal', function (event) {

        if ( $("#payment85").length > 0 && $("#payment85_add").length > 0 ) {
          objDD = $('#payment85').next();
          objUL = objDD.find('ul');
          objLI = $('#payment85_add').children();
          objUL.append(objLI);
        }

        targetDD_A = $('#payment57').next().find('a');
        targetDD_A.replaceWith('<a id="a_sample_rcpt" href="javascript:void(0);">領収書データのサンプルを見る</a>');

        // 領収書データ サンプル画像を表示
        $('#a_sample_rcpt').on('click', function() {
          $('#img_sample_rcpt').toggleClass("img_active");
          if ($('#a_sample_rcpt').length) {
            if ( $('#img_sample_rcpt').hasClass("img_active") ) {
              $('#a_sample_rcpt').text("領収書データのサンプルを閉じる");
            } else {
              $('#a_sample_rcpt').text("領収書データのサンプルを見る");
            }
          }

        });
      });
      },
      failure: function(results){
        console.log('failure: ' + results);
      }
  });
}

function show_hold_reservation_faq(curr_lcl_id) {

  $.ajax
  ({
    type: 'post',
    url: '/Ajax/show_hold_reservation_faq',
      dataType: 'html',
        data: {
          lcl_id : curr_lcl_id
        },
      success: function(results){

      $('#modal-body-receipt-faq').empty();     // 以前の html タグを削除する
      $('#modal-body-receipt-faq').append(results);

      if ( $("#modal-tit-receipt-faq").length > 0 ) {
        $('#modal-tit-receipt-faq').empty();      // 以前の html タグを削除する
        $('#modal-tit-receipt-faq').append('クレジットカードの入力について');
      }

      $('#modal_receipt_faq').modal({show:true});

      change_accordion();

      },
      failure: function(results){
        console.log('failure: ' + results);
      }
  });
}

//========== del room ========================================================
function del_room(_this,sqnc) {
  // get tbody
  var pc_tbody = $(_this).parents().parents().parents().parents("tbody");
  // tr count
  var rows_cnt = $(pc_tbody).children('tr').length;
  if (rows_cnt == 1){
    // alert('全ての部屋を削除は出来ません');
    return false;
  }
  var no = 1;
  $(pc_tbody).children('tr').each(function(idx, elm) {
      var tmp_id = $(elm).children().children('span').attr('id');
    if (tmp_id == sqnc + 'no'){
      $(elm).remove();
    }else{
      $(elm).children().children('span').text(no);
      no++;
    }
  });

  // 一括登録ボタン可否設定
  set_disable_bulk_regist();
//  return false;
}


function check_to_submit(){
 	var phase = $('input[name=phase]').val();

	// eco require check
	if (chk_require_eco_calendar() == false){
		alert('連泊ECOプランを利用する場合、対象日を一箇所は選択してください');
		return false;
	}

	var cls_cnfm_btn_disabled = '';
	if (cls_cnfm_btn_disabled == 'disabled' && $('#agree').prop('checked') != true) {
		return false;
	}

 	// カード番号、有効期限-月、有効期限-年、名義人を確認
	var open_flg = ( $('#credit_card_input_info').length > 0 && $('#credit_card_input_info').css('display') === 'none' ) ? false : true;
	if (phase == 'entry'
	    && (($('#payment').val() == ONSITE_PAYMENT_BY_PERSON && open_flg) || $('#payment').val() == ONLINE_CREDIT_CARD_PAYMENT_PERSONAL)
			&& $('#radio_card_select_new:checked').val() == -1) {
		// クレジット情報欄入力チェック
		if (!card_input_check()) {
			return false;
		}
		// セキュリティコード欄入力チェック
		if (!scrity_code_check()) {
			return false;
		}
	 	// 新規のクレジットカードを利用する場合、決済SVへ問い合わせる
		my_get_token();
		return false;
	}
	console.log('check_to_submit select card');
	if (phase == 'entry'
	    && (
     	   $('#payment').val() == ONSITE_PAYMENT_BY_PERSON ||
    	   $('#payment').val() == ONLINE_CREDIT_CARD_PAYMENT_PERSONAL ||
    	   $('#payment').val() == ONLINE_CREDIT_CARD_PAYMENT_COMPANY)
    ) {
		select_rgst_credit_card();
		// セキュリティコード欄入力チェック
		if (!scrity_code_check()) {
			return false;
		}
	}

 	loadingOn('しばらくお待ちください。');
	document.entry_form.submit();
	return false;
}


</script>
<style>
.room_tr{
	border-top:3px solid #09529e;"
}
.err_fnt{
	color:red;
	font-weight:bold;
}
@media screen and (max-width: 767px) {
  .tbl-rsrv-detail {
    width: 100%;
  }
  .tbl-rsrv-detail .thead {
    display: none;
  }
  .tbl-rsrv-detail tr {
    width: 100%;
  }
  .tbl-rsrv-detail td {
    display: block;
    text-align: right;
    width: 100%;
  }
  .tbl-rsrv-detail td:first-of-type {
    background: #e6eef5;
    color: #09529e;
    font-weight: bold;
    text-align: center;
  }
  .tbl-rsrv-detail td:before {
    content: attr(data-label);
    float: left;
    font-weight: bold;
    margin-right: 10px;
  }
.eco_table {
	width: auto;
	min-width: 180px;
}

@media screen and (max-width: 767px) {
  .tbl-rsrv-detail-eco .thead {
    display: table-cell;
  }
  .tbl-rsrv-detail-eco td {
    display: table-cell;
    text-align: right;
	width: auto !important;
  }
  .tbl-rsrv-detail-eco td:first-of-type {
    color: #333;
    font-weight: normal;
    text-align: center;
  }
}
</style>

<style>
.sample_rcpt {
	display: none;
}
.img_active {
	display: block !important;
}
.img_sample_rcpt {
	border: 1px solid #000;
	margin: 10px auto;
}

.btn-blue-r {
	border: 2px solid #09529e;
	color: #09529e !important;
}
.accBox01.typeQA > dt a {
	text-decoration: none !important;
}
.accBox01.typeQA > dt a:hover {
	text-decoration: underline !important;
}
.dayuse_msg1 {
	font-size: 1.4rem;
	color: #f00;
	font-weight: bold;
}
.dayuse_msg2 {
	font-size: 1.1rem;
	color: #f00;
	font-weight: bold;
}
.goto_ttl {
	color: #f00;
	font-weight: bold;
}
.goto_brdr {
	border: 1px solid #f00;
}
.goto_exp ul {
	padding-left: 10px;
}
.cpn_err_fnt {
	font-size: 1.5rem;
	color:red;
 	font-weight: bold;
}
.cpn_name {
	min-height: initial;
	min-height: auto;
}
.cpn_priod {
}
.panel_disable {
	background-color: gray !important;
}
.input_disable {
	background-color: dimgray !important;
}
.cpn_ttl_price {
	color: #EC1C24;
    font-weight: bold;
    margin-bottom: 0;
}
.v3_warn_msg {
	margin-top: 20px !important;
	padding: 20px !important;
	text-align: center;
	font-weight: bold;
	max-width: none !important;
	width: 100% !important;
}
</style>

<div class="page-title">
	<div class="page-header bg-primary">
		<h1 class="text-center">宿泊予約</h1>
	</div>
</div>

<div class="container theme-showcase" role="main">

	<div class="input-flow">
		<ul class="nav nav-pills" role="tablist">
					<li role="presentation" class="text-center  active">01.入力</li>
					<li role="presentation" class="text-center ">02.確認</li>
					<li role="presentation" class="text-center ">03.完了</li>
				</ul>
	</div>


	<form name="entry_form" role="form" class="form-horizontal" method="post" action="/Reservation/entry/">
		
<input type="hidden" name="phase" value="entry">
		
<input type="hidden" name="hddn_lcl_id" value="ja">
		
<input type="hidden" name="hddn_htl_info_uid" value="6000302">
		
<input type="hidden" name="hddn_stay_tax_clssfctn" value="001">
		
<input type="hidden" name="hddn_htl_location_country_uid" value="392">
		
<input type="hidden" name="hddn_htl_code" value="00244">
		
<input type="hidden" name="hddn_htl_name" value="東横INN品川港南口天王洲アイル">
		
<input type="hidden" name="hddn_checkin" value="2025-08-03">
		
<input type="hidden" name="hddn_stays" value="1">
		
<input type="hidden" name="hddn_use" value="1">
		
<input type="hidden" name="hddn_room_clss" value="10">
		
<input type="hidden" name="hddn_time_zone" value="Asia/Tokyo">
		
<input type="hidden" name="hddn_ldgng_num" value="泊">
		
<input type="hidden" name="hddn_corp_name" value="xxxxxxxxxxx">
		
<input type="hidden" name="hddn_mmbrshp_uid" value="">
		
<input type="hidden" name="hddn_mmbrshp_nmbr" value="">
		
<input type="hidden" name="hddn_rsrvd_cpn_uids" value="">
		
<input type="hidden" name="LBL_CUSTOMER_MANAGE_COLUMN_SET" value="お客様管理欄">
		
<input type="hidden" name="ci_csrf_token" value="7f65063f18fcde2e526e0f524b2d2051">

				    <div class="pos_relative"><span class="req_exp">必須</span></div>
		<div class="panel panel-default">
		<div class="panel-body">
			<div class="clearfix">
				<label class="col-sm-2 control-label">宿泊ホテル</label>
				<div class="col-sm-10">
					<div class="form-group">
						<p class="form-control-static">東横INN品川港南口天王洲アイル</p>
					</div>
				</div>
			</div>
			<div class="clearfix">
				<label class="col-sm-2 control-label">宿泊日/泊数</label>
				<div class="col-sm-10">
					<div class="form-group change-date">
						<p id="checkin_stays" class="form-control-static mr15">2025年08月03日（日） 1泊   </p>
									<a href="javascript:void(0)" onclick="schedule_show_modal()" class="btn btn-orange">日程変更</a>									</div>
				</div>
			</div>
			<div class="clearfix">
				<label class="col-sm-2 control-label">予約者名</label>
				<div class="col-sm-10">
					<div class="clearfix">
						<div class="form-group input-name-01"><div class="input-name-02 clearfix"><p class="sub-item pos_relative req_lbl pr5">姓</p><input type="text" name="rsrv_last_name" value="SONEDA" id="rsrv_last_name" class="form-control" placeholder="例)TOYOKO" maxlength="24" readonly="readonly">
</div></div><div class="form-group input-name-01"><div class="input-name-02 clearfix"><p class="sub-item pr5">名</p><input type="text" name="rsrv_frst_name" value="YUSUKE" id="rsrv_frst_name" class="form-control" placeholder="例)HANAKO" maxlength="24" readonly="readonly">
</div></div>					</div>

				</div>
			</div>
			<div class="clearfix">
				<label class="col-sm-2 control-label pos_relative req_lbl" for="mailaddrss">メールアドレス</label>
				<div class="col-sm-10">
									<span class="help-block">半角英数字記号のみ</span>
									<div class="form-group"><div class="clearfix"><input type="text" name="mailaddrss" value="soneday@keyence.co.jp" id="mailaddrss" class="form-control" placeholder="例)xxx@xxx.co.jp" maxlength="255">
</div></div>				</div>
			</div>
			<div class="clearfix">
				<label class="col-sm-2 control-label  pos_relative req_lbl" for="rsrv_tel">電話番号</label>
				<div class="col-sm-10">
									<span class="help-block">半角数字のみ</span>
									<div class="form-group"><div class="clearfix"><input type="text" name="rsrv_tel" value="08061388455" id="rsrv_tel" class="form-control" placeholder="例)09012345678" maxlength="20">
</div></div>				</div>
			</div>
		</div>
	</div>
    <div class="panel panel-default">
      <div class="panel-body">

        <div class="clearfix">
          <label class="col-sm-2 control-label" for="plan">プラン</label>
          <div class="col-sm-5">
            
<input type="hidden" name="hddn_plan_code" value="0000">
                        <span id="plan_list_info">
                        <div id="plan_info_3178" data-pymnt_list="2_3_4_1" data-check_in_time_list="16:30:00#16:00～16:30|17:00:00#16:30～17:00|17:30:00#17:00～17:30|18:00:00#17:30～18:00|18:30:00#18:00～18:30|19:00:00#18:30～19:00|19:30:00#19:00～19:30|20:00:00#19:30～20:00|20:30:00#20:00～20:30|21:00:00#20:30～21:00|21:30:00#21:00～21:30|22:00:00#21:30～22:00|22:30:00#22:00～22:30|23:00:00#22:30～23:00|23:30:00#23:00～23:30|23:59:00#23:30～24:00" data-by_room_type="SAK#禁煙エコノミーシングル$1#1人$bsns|SK#禁煙シングル$1#1人$bsns_chld|PSK#プレミアムプラスルーム$1#1人_2#2人$bsns_chld" data-force_cpn_pymnt="true"></div>
<div id="plan_info_0000" data-pymnt_list="2_3_4_1" data-check_in_time_list="15:00:00#15:00～16:00|17:00:00#16:00～17:00|18:00:00#17:00～18:00|19:00:00#18:00～19:00|20:00:00#19:00～20:00|21:00:00#20:00～21:00|22:00:00#21:00～22:00|22:30:00#22:00～22:30|23:00:00#22:30～23:00|23:30:00#23:00～23:30|23:59:00#23:30～24:00" data-by_room_type="SAK#禁煙エコノミーシングル$1#1人$bsns|SK#禁煙シングル$1#1人$bsns_chld|PSK#プレミアムプラスルーム$1#1人_2#2人$bsns_chld" data-force_cpn_pymnt="true"></div>
<div class="form-group clBoth"><div class="clearfix"><select id="slct_plan" name="slct_plan" class="form-control" onchange="set_plan_overview(true, true);">
<option value="3178">【スタンダード】</option>
<option value="0000" selected="selected">プランを利用しない</option>
</select>
</div></div>            </span>
                      </div>
          <div class="col-sm-5">
                        <div class="hidden-xs" style="margin-top: 7px;"></div>
            <span id="plan_detail_caution" style="display: none;">
              <a id="plan_detail" href="javascript:void(0);" data-toggle="popover" data-trigger="focus" data-content="" data-placement="bottom" data-html="true" tabindex="0" data-original-title="" title="">プラン詳細説明</a>
              ／
              <a id="plan_caution" href="javascript:void(0);" data-toggle="popover" data-trigger="focus" data-content="" data-placement="bottom" data-html="true" tabindex="0" data-original-title="" title="">注意事項</a>
            </span>
                      </div>
        </div>
        <div class="clearfix form-inline">
            <!-- Goto option -->
            <div id="goto_section" class="dpBlock">
              <div id="goto_div" style="display:none">
                <div class="visible-xs">&nbsp;</div>
                <label class="col-sm-2" for="plan">Go To トラベル</label>
                <div class="col-sm-5">
                  <label class="radio-inline pt0"><input type="radio" name="goto" value="1" id="goto_1" onchange="set_plan_overview(true, true);">
利用する</label><label class="radio-inline pt0 active"><input type="radio" name="goto" value="0" checked="checked" id="goto_0" onchange="set_plan_overview(true, true);">
利用しない</label>                                  </div>
                <div class="visible-xs mt5"></div>
                <div class="col-sm-5">
                                    <span id="goto_detail_caution">
                  <a href="javascript:void(0);" name="goto_plan_detail" data-toggle="popover" data-trigger="focus" data-content="" data-placement="bottom" data-html="true" data-original-title="" title="" tabindex="0">プラン詳細説明</a>
                  ／
                  <a href="javascript:void(0);" name="goto_plan_caution" data-toggle="popover" data-trigger="focus" data-content="" data-placement="bottom" data-html="true" data-original-title="" title="" tabindex="0">注意事項</a>
                  </span>
                                  </div>
              </div>
            </div>
        </div>
                <div class="col-sm-2"></div>
        <div class="col-sm-10 help-block mt5">※プランを変更すると部屋タイプとオプションのご入力内容がクリアされます</div>
              </div>
    </div>

	<div class="panel panel-default">
		<div class="panel-body">
			            <div class="bulk-regist" id="bulk_regist_div">
				<div class="btn-wrapper">
				<a href="javascript:void(0)" onclick="bulk_regist_show_modal(this)" class="btn btn-blue">一括登録</a>				</div>
			</div>

			<div class="displayreset">
				<div class="table-responsive-nobrdr">
					<table class="table table-bordered input-type02 tbl-rsrv-detail">
						<thead>
							<tr class="thead">
								<th>No</th>
								<th>宿泊者名</th>
								<th class="gender">当日の連絡先<br>性別<br>国籍</th>
								<th>部屋タイプ<br>利用人数</th>
								<th>チェックイン時刻</th>
								<th>お客様管理欄</th>
								<th></th>
							</tr>
						</thead>
						<tbody id="room_tbody">
																			<tr class="room_tr">
								
<input type="hidden" name="sq_1_hddn_mmbrshp_nmbr" value="">

<input type="hidden" name="sq_1_hddn_mmbrshp_nmbr_uid" value="">

<input type="hidden" name="sq_1_hddn_rsrv_info_uid" value="">

<input type="hidden" name="sq_1_hddn_chckn_time" value="17:00:00">
								<td data-label="No"><span id="sq_1_no" class="">1</span></td>
								<td data-label="宿泊者名" class="">
									<div class="clearfix">
									<input type="hidden" name="sq_1_same_subscriber" value="0" id="sq_1_same_subscriber_hddn" class="form-control">
	    											    											<div class="checkbox"><label><input type="checkbox" name="sq_1_same_subscriber" value="1" id="sq_1_same_subscriber">
予約者と同じ</label></div>	    																				<div class="form-group clBoth"><div class="input-name-02 clearfix clBoth"><p class="sub-item pos_relative req_lbl pr5">姓</p><input type="text" name="sq_1_last_name" value="" id="sq_1_last_name" class="form-control" placeholder="例)TOYOKO" maxlength="24" readonly="readonly">
</div></div>										<div class="form-group clBoth"><div class="input-name-02 clearfix clBoth"><p class="sub-item pr5">名</p><input type="text" name="sq_1_frst_name" value="" id="sq_1_frst_name" class="form-control" placeholder="例)HANAKO" maxlength="24" readonly="readonly">
</div></div>											</div>
	    										    											    											    											<div class="modal-btn" id="sq_1_btn_club_card" style="display: none;">
	    											<a href="javascript:void(0)" onclick="club_card_show_modal('sq_1_')" class="btn btn-blue club-card">クラブカード会員番号</a>	    											</div>
	    											    										<label id="sq_1_disp_mmbrshp_nmbr" style="display:none;"></label>
	    																							<div id="sq_1_reset_mmbrshp_nmbr_wrap" style="display:none;">
		    											<button id="sq_1_reset_mmbrshp_nmbr" type="button" class="btn btn-blue-r club-card" onclick="reset_club_card_mmbrshp_nmbr('sq_1_');">宿泊者名変更</button>
													</div>
													    											    																	</td>
								<td data-label="当日の連絡先 / 性別 / 国籍" class="">
									<div class="form-group clBoth"><div class="clearfix"><input type="text" name="sq_1_tel" value="" id="sq_1_tel" class="form-control" maxlength="20" placeholder="例)09012345678">
</div></div>									<label class="pr10 active"><input type="radio" name="sq_1_gender" value="1" checked="checked" id="sq_1_gender_1">
男性</label><label class="pr10"><input type="radio" name="sq_1_gender" value="2" id="sq_1_gender_2">
女性</label>									<div class="form-group clBoth"><div class="clearfix"><select id="sq_1_cntry" name="sq_1_cntry" class="form-control">
<option value="JPN">日本</option>
<option value="KOR">韓国</option>
<option value="USA">アメリカ合衆国</option>
<option value="GBR">イギリス</option>
<option value="DEU">ドイツ</option>
<option value="FRA">フランス</option>
<option value="ITA">イタリア</option>
<option value="IND">インド</option>
<option value="AUS">オーストラリア</option>
<option value="NLD">オランダ</option>
<option value="CAN">カナダ</option>
<option value="KHM">カンボジア</option>
<option value="MNG">モンゴル</option>
<option value="SGP">シンガポール</option>
<option value="CHE">スイス</option>
<option value="SWE">スウェーデン</option>
<option value="ESP">スペイン</option>
<option value="SVN">スロベニア</option>
<option value="THA">タイ</option>
<option value="TWN">台湾（台湾省/中華民国）</option>
<option value="CHN">中国</option>
<option value="PHL">フィリピン</option>
<option value="BRA">ブラジル</option>
<option value="POL">ポーランド</option>
<option value="HKG">香港</option>
<option value="MYS">マレーシア</option>
<option value="MMR">ミャンマー</option>
<option value="MEX">メキシコ</option>
<option value="RUS">ロシア</option>
<option value="E99">その他の国</option>
</select>
</div></div>								</td>
								<td data-label="部屋タイプ / 利用人数" class="">
								
<input type="hidden" name="sq_1_hddn_eco_flg" value="false">

<input type="hidden" name="sq_1_hddn_vod_flg" value="false">

<input type="hidden" name="sq_1_hddn_bsns_flg" value="false">

<input type="hidden" name="sq_1_hddn_chld_flg" value="false">

																			<!-- 部屋タイプ -->
										<div class="form-group clBoth"><div class="clearfix max_width180"><select id="sq_1_room_type" name="sq_1_room_type" class="form-control" onchange="change_room_type('sq_1_');">
<option value="0" selected="selected">部屋タイプを選択する</option>





<option value="SAK" data-ppl="1#1人" data-optn="bsns">禁煙エコノミーシングル</option><option value="SK" data-ppl="1#1人" data-optn="bsns_chld">禁煙シングル</option><option value="PSK" data-ppl="1#1人_2#2人" data-optn="bsns_chld">プレミアムプラスルーム</option></select>
</div></div>									
									<!-- 人数 -->
									<div class="form-group clBoth"><div class="clearfix max_width180"><select id="sq_1_lodgers" name="sq_1_lodgers" class="form-control">
<option value="1" selected="selected">1人</option>
</select>
</div></div>
									
										<!-- eco -->
										<div id="sq_1_eco_section" class="dpNone">
											<hr class="wFull mt10 mb5 dashed_line">
											<div class="alL pl5">
												連泊ECOプラン<a href="javascript:void(0);" data-toggle="popover" data-trigger="focus" data-content="連泊ECOプランとは<br><a href='/campaign/eco' target='_blank'>リンク</a>" data-placement="bottom" data-html="true" data-original-title="" title=""><i class="glyphicon glyphicon-question-sign ml10" aria-hidden="true"></i></a><br>
												<label class="radio-inline pt0"><input type="radio" name="sq_1_eco" value="1" id="sq_1_eco_1" onclick="eco_click('sq_1_');">
利用する</label><label class="radio-inline pt0 active"><input type="radio" name="sq_1_eco" value="0" checked="checked" id="sq_1_eco_0" onclick="eco_click('sq_1_');">
利用しない</label>												<br>
												※２連泊以上対象となります
											</div>
											<div id="sq_1_eco_calendar" class="dpNone">
												<table class="table table-bordered eco_table tbl-rsrv-detail-eco">
													<tbody>
														<tr>
															<th colspan="1" id="sq_1_eco_calendar_head" class="" align="center">連泊ECOプラン対象日</th>
														</tr>
														<tr>
																																											<td class="disable_bg_color" align="center">
																<font>08/03</font><br>
																<input type="checkbox" name="sq_1_eco_calendar_days[]" disabled="" onchange="eco_calendar_open_close(this)" value="2025-08-03">
															</td>
																																										</tr>
													</tbody>
												</table>
											</div>
										</div>

										<!-- other option -->
										<div id="sq_1_option_div" style="display: none;">
											<!-- 日帰り部屋の文言1 -->
											<div id="sq_1_dayuse_msg1" class="form-group clBoth dpNone">
												<div class="alL clearfix dayuse_msg1">日帰りの場合、下記オプションは<br class="hidden-xs hidden-sm hidden-md">すべて「利用しない」を選択して下さい。</div>
											</div>
											<!-- VOD -->
											<div id="sq_1_vod_div" class="dpNone">
												<hr class="wFull mt10 mb5 dashed_line">
												<div class="alL pl5">
													VOD(+500円)<br>
													<label class="radio-inline pt0"><input type="radio" name="sq_1_vod" value="1" id="sq_1_vod_1">
利用する</label><label class="radio-inline pt0 active"><input type="radio" name="sq_1_vod" value="0" checked="checked" id="sq_1_vod_0">
利用しない</label>												</div>
											</div>
											<!-- BUSSINES PACK -->
											<div id="sq_1_bsns_div" class="dpNone">
												<hr class="wFull mt10 mb5 dashed_line">
												<div class="alL pl5" style="word-wrap: break-word;">
													ビジネスパック（VJAギフトカードとのセットプラン）<br>
													<label class="radio-vertical pt0 active"><input type="radio" name="sq_1_biztype" value="0" checked="checked" id="sq_1_biztype_0">
利用しない</label><label class="radio-vertical pt0"><input type="radio" name="sq_1_biztype" value="020" id="sq_1_biztype_020">
ビジネスパック100（＋1000円分のVJAギフトカード）</label><label class="radio-vertical pt0"><input type="radio" name="sq_1_biztype" value="021" id="sq_1_biztype_021">
ビジネスパック200（＋2000円分のVJAギフトカード）</label><label class="radio-vertical pt0"><input type="radio" name="sq_1_biztype" value="022" id="sq_1_biztype_022">
ビジネスパック300（＋3000円分のVJAギフトカード）</label>												</div>
											</div>
											<!-- CHILD -->
											<div id="sq_1_chld_div" class="dpNone">
												<hr class="wFull mt10 mb5 dashed_line">
												<div class="alL pl5">
													お子様添い寝<br>
													<label class="radio-inline pt0"><input type="radio" name="sq_1_child" value="1" id="sq_1_child_1">
利用する</label><label class="radio-inline pt0 active"><input type="radio" name="sq_1_child" value="0" checked="checked" id="sq_1_child_0">
利用しない</label>												</div>
												<hr class="wFull mt10 mb5 dashed_line">
											</div>
										</div>
										<div class="alL"><a href="javascript:void(0)" onclick="option_open_close(this,'sq_1_')">その他のオプションを開く<i class="ml5 glyphicon glyphicon-menu-up"></i></a></div>
																	</td>
								<td data-label="チェックイン時刻" class="">
																		<!-- 日帰り部屋の文言2 -->
									<div id="sq_1_dayuse_msg2" class="form-group clBoth dpNone">
										<div class="alL clearfix max_width160 min_width100 dayuse_msg2">日帰りの場合は16:00～17:00を選択して下さい。</div>
									</div>
																		<div class="form-group clBoth"><div class="clearfix max_width160 min_width100"><select id="sq_1_check_in_time" name="sq_1_check_in_time" class="form-control"><option value="15:00:00">15:00～16:00</option><option value="17:00:00">16:00～17:00</option><option value="18:00:00">17:00～18:00</option><option value="19:00:00">18:00～19:00</option><option value="20:00:00">19:00～20:00</option><option value="21:00:00">20:00～21:00</option><option value="22:00:00">21:00～22:00</option><option value="22:30:00">22:00～22:30</option><option value="23:00:00">22:30～23:00</option><option value="23:30:00">23:00～23:30</option><option value="23:59:00">23:30～24:00</option></select>
</div></div>								</td>
								<td data-label="お客様管理欄" class="">
									<div class="form-group clBoth"><div class="clearfix max_width160"><input type="text" name="sq_1_management_colum" value="" id="sq_1_management_colum" class="form-control" maxlength="20">
</div></div>								</td>
								<td data-label="">
																			<div class="del-room">
											<div class="btn-wrapper">
												<button id="sq_1_btnDel" type="button" class="btn btn-red" onclick="del_room(this,'sq_1_');" disabled=""><i class="fas fa-times"></i></button>
											</div>
										</div>
																	</td>
							</tr>
												
						</tbody>
					</table>
								</div>
									<div class="add-room">
						<div class="btn-wrapper">
							<button id="btn_add_room" type="button" class="btn btn-orange" onclick="add_room(this);">部屋を追加<i class="fas fa-plus"></i></button>
						</div>
					</div>
							</div>

		</div>
	</div>
			<div class="collapse">
		<div class="panel panel-default">
		<div class="panel-body">
						<div class="clearfix" id="payment_div">
				<label class="col-sm-2 control-label pos_relative req_lbl" for="SelectPayment">支払方法</label>
				<div class="col-sm-5">
					<div class="form-group"><div class="payment clearfix"><select id="payment" name="payment" class="form-control" style="width: 100%;">
<option value="2" selected="selected">現地本人払い</option>
</select>
</div></div>				</div>
									<div class="col-sm-4" id="about_credit_payment" style="display: none;"></div>
							</div>
			<!-- クレジットカード情報欄 -->
			<script>
///////////////////////////////////////////////////////////////////////
// PHP側とtoyoko_credit.jsでデータの連携を行いたい場合は以下に記述する
///////////////////////////////////////////////////////////////////////

var systemId = '1';
var apiKey = 'i1ajBe0E+';
var LOCATION_COUNTRY_UID_FRENCH = '250'
var lclId = 'ja';
var cpay_err_msg = 'カード情報の取得に失敗しました。カード情報をご確認の上、再度お試しください。';
var lbl_ttl = '';
var lbl_on = 'クレジットカード欄を入力';
var lbl_off = 'クレジットカード欄を閉じる';
var req_url = '/Reservation/entry';
var is_reserve = req_url.indexOf('Reservation') > 0 ? true : false;
var oc_advnc_pymnt_dsply_flag = is_reserve ? '1' : '0';
var scrty_code_dsply_flag = is_reserve ? '1' : '0';
var crt_display_flag = is_reserve ? '0' : '0';
var crdt_readonly = '';
var card_token_list_count = '0';

var input_card_cmpny_1 = 'カード会社名を入力してください。';
var input_card_nmbr_1 = 'カード番号の長さは14文字以上である必要があります。';
var input_card_nmbr_2 = 'カード番号は数字を入力してください。';
var input_card_expr_date_1 = '有効期限-月を入力してください。';
var input_card_expr_date_2 = '有効期限-年を入力してください。';
var input_card_expr_date_3 = '有効期限の年月が不正です。';
var input_card_expr_date_4 = '有効期限がチェックイン日より前になっています。再入力して下さい。';
var input_card_name_1 = '名義人を入力してください。';
var input_card_name_2 = '名義人はアルファベットを入力してください。';
var input_card_name_3 = '名義人は20文字以下で入力してください。';
var input_card_scrty_code_1 = 'セキュリティコードを入力してください。';
var input_card_scrty_code_2 = 'セキュリティコードは数字を入力してください。';
var input_card_scrty_code_3 = 'セキュリティコードは4文字以下で入力してください。';
</script>
<!-- 隠し項目は以下に追加する -->
<input type="hidden" id="card_token_list_count" name="card_token_list_count" value="0">
<input type="hidden" id="card_type_code" name="card_type_code" value="">
<input type="hidden" id="onln_card_tkn" name="onln_card_tkn" value="">
<input type="hidden" id="mask_card_no" name="mask_card_no" value="">
<input type="hidden" id="last_fr_dgts" name="last_fr_dgts" value="">
<input type="hidden" id="card_type_name" name="card_type_name" value="">
<input type="hidden" id="errr_code" name="errr_code" value="">
<input type="hidden" id="card_select" name="hd_card_select" value="">
<input type="hidden" id="payment" name="hd_payment" value="2">
<input type="hidden" name="cardregist">

			   								<div id="output_card_info" style="display: none;">
					<div id="reserve_credit_card_info_msg" style="display: none;">
											</div>
   					    				
															<div id="radio_card_select_new_area">
	    																	<!-- --------------------------------------- -->
							<!--  今回のご宿泊ではじめてご利用するカード -->
							<!-- --------------------------------------- -->
							<p class="col-sm-2"></p>
							<div class="col-sm-10 mb10">
								<label class="radio-inline col-sm-10"><input type="radio" name="card_select" value="-1" id="radio_card_select_new">
今回のご宿泊ではじめてご利用するカード</label>							</div>
																	</div>
				</div>
							<!-- オンライン決済（会社名義）の場合に表示 -->
				<div id="output_card_info_corp" style="display: none;">
														</div>
									<div id="credit_card_input_info" style="display: none;">
							    							<label class="col-sm-2 control-label" id="lbl_credit_card_info">新規に追加するクレジットカード情報</label>

    							<!-- ------------ -->
    							<!-- カード入力欄 -->
    							<!-- ------------ -->
    							<div class="clearfix credit">
       								<div class="col-sm-10" id="card_input_info">
									        								<div class="boxError" id="cardErrorMessage"></div>
									        								<span class="help-block">カード番号</span>
        								<div class="form-group has-feedback">
        								        									<input type="text" class="form-control w40per" id="InputCardNumber" name="InputCardNumber" placeholder="例)0000000000000000" maxlength="16">
        									<div class="credit-icons">
        										<ul id="online_card_img" style="display: none;">
        										        											<li><img src="/img/common/601.gif"></li>
        										        											<li><img src="/img/common/602.gif"></li>
        										        											<li><img src="/img/common/605.gif"></li>
        										        											<li><img src="/img/common/608.gif"></li>
        										        											<li><img src="/img/common/611.gif"></li>
        										        										</ul>
        										            										<ul id="onsite_card_img" style="display: flex;">
            										            											<li><img src="/img/common/601.gif"></li>
            										            											<li><img src="/img/common/602.gif"></li>
            										            											<li><img src="/img/common/605.gif"></li>
            										            											<li><img src="/img/common/608.gif"></li>
            										            											<li><img src="/img/common/611.gif"></li>
            										            											<li><img src="/img/common/612.gif"></li>
            										            											<li><img src="/img/common/617.gif"></li>
            										            											<li><img src="/img/common/619.gif"></li>
            										            											<li><img src="/img/common/623.gif"></li>
            										            											<li><img src="/img/common/620.gif"></li>
            										            											<li><img src="/img/common/624.gif"></li>
            										            											<li><img src="/img/common/618.gif"></li>
            										            											<li><img src="/img/common/616.gif"></li>
            										            											<li><img src="/img/common/622.gif"></li>
            										            										</ul>
        										        									</div>
        									<div class="help-block with-errors"></div>
        								        								</div>

        								<span class="help-block">有効期限</span>
        								<div class="row">
        									<div class="form-inline">
        										<div class="col-xs-12 col-md-5 col-lg-5">
        											<div class="form-group">
        												<div class="form-group "><div class=" clearfix"><select id="card_expr_mnth" name="card_expr_mnth" class="form-control">
<option value="" selected="selected">未選択</option>
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
</select>
</div></div>        												<label class="sub-item">月</label>
        											</div>
        											<div class="form-group">
        												<div class="form-group "><div class=" clearfix"><select id="card_expr_year" name="card_expr_year" class="form-control">
<option value="" selected="selected">未選択</option>
<option value="2025">2025</option>
<option value="2026">2026</option>
<option value="2027">2027</option>
<option value="2028">2028</option>
<option value="2029">2029</option>
<option value="2030">2030</option>
<option value="2031">2031</option>
<option value="2032">2032</option>
<option value="2033">2033</option>
<option value="2034">2034</option>
</select>
</div></div>        												<label class="sub-item">年</label>
        											</div>
        										</div>
        									</div>
        								</div>
        								<span class="help-block">名義人</span>
        								<div class="form-group"><div class="clearfix"><input type="text" name="nominee" value="" id="nominee" class="form-control" placeholder="例)HANAKO TOYOKO">
</div></div>        							</div>
        						</div>
												</div>

								    					    						<!-- -------------------- -->
    						<!--  セキュリティコード  -->
    						<!-- -------------------- -->
    						<div id="id_scrty_code" style="display: none;">
    							<span class="col-sm-2"></span>
    							<div class="col-sm-10 control-label">セキュリティコード</div>
    							<span class="col-sm-2"></span>
    							<div class="form-group col-sm-10 "><div class="clearfix"><input type="text" name="card_scrty_code" value="" id="card_scrty_code" class="form-control" style="width: 20%;" maxlength="4">
</div></div>    						</div>
    										
														<!-- ------------------------------------ -->
						<!--  今回使用するカード情報を登録する。  -->
						<!-- ------------------------------------ -->
						<div id="card_regist_info" style="display: none;">
							<span class="col-sm-2"></span>
							<div class="form-group">
								<div class="checkbox col-sm-10">
									<label><input type="checkbox" name="cardregist" value="1" id="cardregist">
今回使用するカード情報を登録する。</label>								</div>
							</div>
						</div>
					
			<!-- 売掛以外、領収書関連を表示 -->
			<div id="recipt_area">
				<div class="clearfix">
					<label class="col-sm-2 control-label">領収書宛名</label>
					<div class="col-sm-10">
						<div class="mb10">
							<label class="radio-vertical"><input type="radio" name="receipt_name_select" value="1" id="receipt_name_select_1" style="width:auto;float:none;">
宿泊者名</label><label class="radio-vertical"><input type="radio" name="receipt_name_select" value="2" id="receipt_name_select_2" style="width:auto;float:none;">
予約者名</label><label class="radio-vertical active"><input type="radio" name="receipt_name_select" value="4" checked="checked" id="receipt_name_select_4" style="width:auto;float:none;">
会社名（xxxxxxxxxxx）</label>
							<!-- 上記以外 -->
															
								<label class="radio-vertical mr20" style="display: flex;align-items: end;">
									<input type="radio" name="receipt_name_select" id="receipt_name_select_3" value="3" style="width:auto;float:none;">上記以外&nbsp;&nbsp;
							
																<div class="dpInlBlock"><div class="clearfix clBoth"><input type="text" name="receipt_name" value="" id="receipt_name" class="form-control" style="width: 300px;" maxlength="40">
</div></div>
																	<p class="sub-item ml5 mr30" style="display: inline-block;">様</p>
								</label>
								
								
															<div>
									※ 宿泊者名、予約者名を選択された場合はアルファベット表記で領収書の宛名が印字されます。<br>
									※ かな名で発行を希望の場合は「上記以外」を選択してください。<br>
									※ 領収書宛名はチェックイン時に変更することも可能です。<br>
								</div>
							
						</div>
					</div>
				</div>

				<!-- 郵便番号はフランスのみ -->
				
				<!-- 領収書住所表示フラグ -->
							</div>
		</div>
	</div>
			</div>
	

			<div class="panel panel-default" id="cpn_panel">
			<div class="panel-body">
				<div class="clearfix" id="cpn_div">
					<label class="col-sm-2 control-label pos_relative" for="SelectPayment">Webクーポン</label>
					<div class="col-sm-10">
						<div id="cpn_area" class="form-group">

							<div id="cpn_area">
								<!-- 自動表示クーポン -->
																	<div class="clearfix" id="div_cpn_mnl_1" data-cpn_priod_start="" data-cpn_priod_end="">
										<div class="col-xs-8 col-sm-8 pr0 pl0">
																						<!-- TODO 登録ボタン前 -->
												<div class="clearfix" id="div_cpn_mnl_1_code">
													<div class="form-group"><div class="clearfix"><input type="text" name="cpn_mnl_1_code" value="" id="cpn_mnl_1_code" class="form-control" placeholder="クーポンコードを入力" style="display: inline-block; width: 200px;" maxlength="20">
</div></div>												</div>
												<!-- TODO 解除ボタン前 -->
												<div class="clearfix" id="div_cpn_mnl_1_lbl">
													<p class="form-control-static mr15 pb0 cpn_name"></p>
												</div>
										
<input type="hidden" name="cpn_mnl_1_uid" value="">
										</div>
										<div class="col-xs-4 col-sm-4 pr0 pl20">
											<div class="form-group"><div class="clearfix"><input type="text" name="cpn_mnl_1_qntty" value="" id="cpn_mnl_1_qntty" class="form-control" style="display: inline-block; width: 30px; margin-bottom: 5px;" maxlength="2">
枚</div></div>										</div>
									</div>
																	<!-- 合計 -->
																</div>
						</div>
										</div>
				</div>
			</div>
		</div>
	
		
		<div id="rsvtn_special_message"></div>

		
		<div class="form-operation">
			<div class="clearfix">
				<div class="col-sm-6">
					<div class="btn-wrapper btn-arrow btn-arrow-left">
						<button type="button" id="Back" class="btn btn-blue" onclick="redirect_to('/Search/condition')">戻る</button>
					</div>
				</div>

				
									<div class="form-last col-sm-6">
						<div class="btn-wrapper btn-arrow btn-arrow-right">
							<button id="btn_next" type="button" class="btn btn-orange " onclick="check_to_submit();">確認画面へ</button>
						</div>
					</div>
							</div>
		</div>

	</form>
	<div class="modal fade" id="modal_rule_terms_privacy" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body" id="modal-body-rule-terms-privacy">
				</div>
			</div>
		</div>
	</div>

	<div class="modal fade" id="modal_receipt_faq" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 id="modal-tit-receipt-faq" class="modal-title flL">オンラインカード決済について</h4>
					<button type="button" class="close flR" data-dismiss="modal">
						<span aria-hidden="true">×</span>
					</button>
				</div><!-- /modal-header -->
				<div class="modal-body pt0" id="modal-body-receipt-faq">
				</div>
			</div>
		</div>
	</div>

<!-- <div class="modal-btn"><a class="btn btn-blue club-card" data-toggle="modal" data-target="#add_option">追加オプション</a></div> -->
<!-- <div class="modal-btn"><a class="btn btn-blue club-card" data-toggle="modal" data-target="#room_detail">部屋詳細</a></div> -->
<!-- <div class="modal-btn"><a class="btn btn-blue club-card" data-toggle="modal" data-target="#allregist">一括登録</a></div> -->
	<div id="modalloading" class="dpNone"></div>
</div> <!-- /container --><script>
// show modal
function bulk_regist_show_modal(_this){
	var link_div = $(_this).parents().parents();
	if ($(link_div).prop('disabled') == false){
	    show_modal('#bulk_regist');
	}
	return false;
}

// close modal with update
function bulk_regist_close_modal_update(modal_id){
	if (!bulk_regist_input_check()) {
		return false;
	}
    update_bulk_regist(modal_id);
    close_modal(modal_id);
	return false;
}

// update
function update_bulk_regist(modal_id){
    var modal = $(modal_id);

    var chk_tel = modal.find('#chk_tel_bulk_regist').prop('checked');
    var chk_gender = modal.find('#chk_gender_bulk_regist').prop('checked');
    var chk_cntry = modal.find('#chk_cntry_bulk_regist').prop('checked');
    var chk_check_in_time = modal.find('#chk_check_in_time_bulk_regist').prop('checked');
    var chk_management_colum = modal.find('#chk_management_colum_bulk_regist').prop('checked');

    var tel = modal.find('#tel_bulk_regist').val();
    var gender = $('input[name="gender_bulk_regist"]:checked').val();
    var cntry = modal.find('#cntry_bulk_regist').val();
    var check_in_time = modal.find('#check_in_time_bulk_regist').val();
    var management_colum = modal.find('#management_colum_bulk_regist').val();
    // get table body
	var tbody = $("#room_tbody");
	// 電話番号
	if (chk_tel){
		$(tbody).find('input[id $= _tel]').each(function(idx, elm){
			$(elm).val(tel);
		});
	}
	// 性別
	if (chk_gender){
	 	console.log('gender:' + gender);
		$(tbody).find('input[name $= _gender]').each(function(idx, elm){
		 	console.log('$(elm).val:' + $(elm).val());
			if ($(elm).val() == gender){
				$(elm).val(gender).prop('checked', true);
			}
		});
	}
	// 国籍
	if (chk_cntry){
		$(tbody).find('select[id $= _cntry]').each(function(idx, elm){
			$(elm).val(cntry);
		});
	}
	// チェックイン時刻
	if (chk_check_in_time){
		$(tbody).find('select[id $= _check_in_time]').each(function(idx, elm){
			$(elm).val(check_in_time);
		});
	}
	// お客様管理欄
	if (chk_management_colum){
		$(tbody).find('input[id $= _management_colum]').each(function(idx, elm){
			$(elm).val(management_colum);
		});
	}
}

// 一括登録用の入力チェック
function bulk_regist_input_check() {

	// 当日の連絡先
	if ($('#chk_tel_bulk_regist').prop('checked') && $('#tel_bulk_regist').val() != '') {
		if (!$('#tel_bulk_regist').val().match(/^[\+0-9]{1}(\+)?[0-9]+$/)) {
			var mess = sprintf('%sはハイフンなし・半角数字で入力してください。','当日の連絡先');
			alert(mess);
			return false;
		}
	}

	// 2019/11/18 削除 半角英数字から、何でも可能とするため
	// お客様管理欄
// 	if ($('#chk_management_colum_bulk_regist').prop('checked') && $('#management_colum_bulk_regist').val() != '') {
// 		if (!$('#management_colum_bulk_regist').val().match(/^[a-zA-Z!-~]+$/)) {
// 			var mess = sprintf('%sは半角英数記号で入力してください。', 'お客様管理欄');
// 			alert(mess);
// 			return false;
// 		}
// 	}
	return true;
}

</script>
<!-- モーダル・ダイアログ -->
<div class="modal fade" id="bulk_regist" tabindex="-1">
	<div class="modal-dialog" style="max-width: 800px;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary">お客様情報一括登録画面</h4>
			</div>
			<div class="colDetail mt10 ml20 colr_red">
				<h5>入力をしたい項目に✔を入れてください</h5>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					<div class="form-group">
						<div class="col-sm-3">
							<input type="checkbox" class="mt10 mr5" id="chk_tel_bulk_regist" value="1">
							<label class="control-label clearfix" for="chk_tel_bulk_regist">当日の連絡先</label>
						</div>
						<div class="col-sm-9 control-label"><input type="text" name="tel_bulk_regist" value="" id="tel_bulk_regist" class="form-control" maxlength="20">
</div>					</div>
					<div class="form-group">
						<div class="col-sm-3">
							<input type="checkbox" class="mt10 mr5" id="chk_gender_bulk_regist" value="1">
							<label class="control-label" for="chk_gender_bulk_regist">性別</label>
						</div>
						<label class="pl20 active"><input type="radio" name="gender_bulk_regist" value="1" checked="checked" id="gender_bulk_regist_1">
男性</label><label class="pl20"><input type="radio" name="gender_bulk_regist" value="2" id="gender_bulk_regist_2">
女性</label>					</div>
					<div class="form-group">
						<div class="col-sm-3">
							<input type="checkbox" class="mt10 mr5" id="chk_cntry_bulk_regist" value="1">
							<label class="control-label" for="chk_cntry_bulk_regist">国籍</label>
						</div>
						<div class="col-sm-9"><select id="cntry_bulk_regist" name="cntry_bulk_regist" class="form-control">
<option value="JPN">日本</option>
<option value="KOR">韓国</option>
<option value="USA">アメリカ合衆国</option>
<option value="GBR">イギリス</option>
<option value="DEU">ドイツ</option>
<option value="FRA">フランス</option>
<option value="ITA">イタリア</option>
<option value="IND">インド</option>
<option value="AUS">オーストラリア</option>
<option value="NLD">オランダ</option>
<option value="CAN">カナダ</option>
<option value="KHM">カンボジア</option>
<option value="MNG">モンゴル</option>
<option value="SGP">シンガポール</option>
<option value="CHE">スイス</option>
<option value="SWE">スウェーデン</option>
<option value="ESP">スペイン</option>
<option value="SVN">スロベニア</option>
<option value="THA">タイ</option>
<option value="TWN">台湾（台湾省/中華民国）</option>
<option value="CHN">中国</option>
<option value="PHL">フィリピン</option>
<option value="BRA">ブラジル</option>
<option value="POL">ポーランド</option>
<option value="HKG">香港</option>
<option value="MYS">マレーシア</option>
<option value="MMR">ミャンマー</option>
<option value="MEX">メキシコ</option>
<option value="RUS">ロシア</option>
<option value="E99">その他の国</option>
</select>
</div>					</div>
					<div class="form-group">
						<div class="col-sm-3">
							<input type="checkbox" class="mt10 mr5" id="chk_check_in_time_bulk_regist" value="1">
							<label class="control-label" for="chk_check_in_time_bulk_regist">チェックイン時刻</label>
						</div>
						<div class="col-sm-9"><select id="check_in_time_bulk_regist" name="check_in_time_bulk_regist" class="form-control"><option value="15:00:00">15:00～16:00</option><option value="17:00:00">16:00～17:00</option><option value="18:00:00">17:00～18:00</option><option value="19:00:00">18:00～19:00</option><option value="20:00:00">19:00～20:00</option><option value="21:00:00">20:00～21:00</option><option value="22:00:00">21:00～22:00</option><option value="22:30:00">22:00～22:30</option><option value="23:00:00">22:30～23:00</option><option value="23:30:00">23:00～23:30</option><option value="23:59:00">23:30～24:00</option></select>
</div>					</div>
										<div class="form-group">
						<div class="col-sm-3">
							<input type="checkbox" class="mt10 mr5" id="chk_management_colum_bulk_regist" value="1">
							<label class="control-label clearfix" for="chk_management_colum_bulk_regist">お客様管理欄</label>
						</div>
						<div class="col-sm-9 control-label"><input type="text" name="management_colum_bulk_regist" value="" id="management_colum_bulk_regist" class="form-control" maxlength="20">
</div>					</div>
										<div class="form-group">
						<div class="col-sm-offset-3 col-sm-9">
							<button type="button" class="btn btn-lg btn-blue mr10" onclick="close_modal('#bulk_regist');">キャンセル</button>
							<button type="button" class="btn btn-lg btn-orange" onclick="bulk_regist_close_modal_update('#bulk_regist');">変更する</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->
<!-- モーダル・ダイアログ -->
<div class="modal fade" id="add_option" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary">追加オプション画面</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					<div class="form-group">
						<label class="col-sm-2 control-label" for="InputEmail">VOD</label>
						<div class="col-sm-10">
							<label class="radio-inline">
								<input type="radio" name="vod" value="男性" checked="checked">利用しない
							</label>
							<label class="radio-inline">
								<input type="radio" name="vod" value="女性">利用する
							</label>
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label" for="InputSelect">ビジネスパック</label>
						<div class="col-sm-10">
							<label class="radio pl20 fwNormal">
								<input type="radio" name="eco" value="男性" checked="checked">利用しない
							</label>
							<label class="radio pl20 fwNormal">
								<input type="radio" name="eco" value="女性">ビジネスパック100(＋1000円分のVJAギフトカード)
							</label>
							<label class="radio pl20 fwNormal">
								<input type="radio" name="eco" value="女性">ビジネスパック200(＋2000円分のVJAギフトカード)
							</label>
							<label class="radio pl20 fwNormal">
								<input type="radio" name="eco" value="女性">ビジネスパック300(＋3000円分のVJAギフトカード)
							</label>
<!-- 							<select class="form-control" id="InputSelect"> -->
<!-- 								<option value="0">利用しない</option> -->
<!-- 								<option value="1">ビジネスパック100(＋1000円分のVJAギフトカード)</option> -->
<!-- 								<option value="2">ビジネスパック200(＋2000円分のVJAギフトカード)</option> -->
<!-- 								<option value="2">ビジネスパック300(＋3000円分のVJAギフトカード)</option> -->
<!-- 							</select> -->
						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label" for="InputEmail">連泊ECOプラン</label>
						<div class="col-sm-10">
							<label class="radio-inline">
								<input type="radio" name="eco" value="男性" checked="checked">利用しない
							</label>
							<label class="radio-inline">
								<input type="radio" name="eco" value="女性">利用する
							</label>

								<div class="checkbox">
									<label><input type="checkbox" value="YYYY年MM月DD日(d)"> YYYY年MM月DD日(d)</label>
								</div>
								<div class="checkbox">
									<label><input type="checkbox" value="YYYY年MM月DD日+1(d)"> YYYY年MM月DD日+1(d)</label>
								</div>
								<div class="checkbox">
									<label><input type="checkbox" value="YYYY年MM月DD日+2(d)"> YYYY年MM月DD日+2(d)</label>
								</div>
								<div class="checkbox">
									<label><input type="checkbox" value="YYYY年MM月DD日+3(d)"> YYYY年MM月DD日+3(d)</label>
								</div>
								<div class="checkbox">
									<label><input type="checkbox" value="YYYY年MM月DD日+5(d)"> YYYY年MM月DD日+5(d)</label>
								</div>
								<div class="checkbox">
									<label><input type="checkbox" value="YYYY年MM月DD日+6(d)"> YYYY年MM月DD日+6(d)</label>
								</div>
								<a href="" class="link text-right">連泊ECOプランとは</a>
<!-- 							<label> -->
<!-- 								<input type="checkbox" required><a href="">「アカウント利用規約」</a>および<a href="">「個人情報保護方針」</a>を読み、その内容に同意します。 -->
<!-- 							</label> -->

						</div>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label" for="InputEmail">お子様添い寝</label>
						<div class="col-sm-10">
							<label class="radio-inline">
								<input type="radio" name="gender" value="男性" checked="checked">なし
							</label>
							<label class="radio-inline">
								<input type="radio" name="gender" value="女性">あり
							</label>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-offset-2 col-sm-10">
							<button type="button" class="btn btn-blue mr10">キャンセル</button>
							<button type="submit" class="btn btn-orange">変更する</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->
<script>
//コールバック用のクラスを定義

// show modal
function schedule_show_modal(){
	// checkindate , stays
    var hddn_checkin = $('input:hidden[name="hddn_checkin"]').val();
    var hddn_stays = $('input:hidden[name="hddn_stays"]').val();
	// set datepicker
    var dtpckr = $('#schedule').find('#datepicker');
    dtpckr.datepicker("setDate", hddn_checkin);
    // set stays
    $('#schedule').find('#stays').val(hddn_stays);
    show_modal('#schedule');
	return false;
}

// close modal with update
function schedule_close_modal_update(modal_id){
    update_checkin_stays(modal_id);
	return false;
}

// update checkin stays
function update_checkin_stays(modal_id){
    var modal = $(modal_id);
    var hddn_checkin = modal.find('#datepicker').val();
    var hddn_stays = modal.find('#stays').val();

    // ecoカレンダー初期化
	$('div[id $= eco_section]').each(function(div_idx, div_section){
		sqnc = $(div_section).attr('id').replace('eco_section', '');
		var room_type = $("#"+sqnc+"room_type");
		// selected
		var room_type_val = $(room_type).val();
		var eco_flg_name = sqnc + 'hddn_eco_flg';
		var hddn_eco_flg = $('input:hidden[name="' + sqnc + 'hddn_eco_flg"]').val();
		if (room_type_val == '0' || hddn_eco_flg == null || hddn_eco_flg == '' || hddn_eco_flg == 'false' || hddn_eco_flg == false || $(div_section).hasClass("dpBlock") && hddn_stays == 1) {
			upd_display(div_section,false);
 		}else if ($(div_section).hasClass("dpNone") && hddn_stays > 1) {
			upd_display(div_section,true);
 		}
 		// ecoカレンダー
 		//if (hddn_stays > 1) {
 			$(div_section).children().children('table').find('th').each(function(i, elem) {
 				// header colspan
 				$(elem).attr('colspan',hddn_stays);
 			});
 	 		var chckn = new Date(hddn_checkin);
 	 		var cntr = 0;
 			$(div_section).children().children('table').find('td').each(function(i, elem) {
 				// init
 				init_eco_calender_day(i, elem, true);
 				// 日付label
 	 			$(elem).children('font').text(format_date_mmdd(add_day(chckn, i)));
				// 値設定
 	 			$(elem).children('input').val(format_date(add_day(chckn, i),'YYYY-MM-DD'));
 				// 超過日付分を削除
 				if (i+1 > hddn_stays){ $(elem).remove(); }
 				cntr = i;
 	 		});
 			// 不足日付Loop
 			for (var idx = cntr + 1; idx < hddn_stays; idx++) {
 	 			var td_last = $(div_section).children().children('table').find('td:last');
 				var td_add = $(td_last).clone(true);
 				// init
 				init_eco_calender_day(idx, $(td_add), true);
 				// 日付label
 				var trgt_date = add_day(chckn, idx);
 	  			$(td_add).children('font').text(format_date_mmdd(trgt_date));
				// 値設定
 				$(td_add).children('input').val(format_date(trgt_date,'YYYY-MM-DD'));
 	  			// 不足日付分を追加
 	  			$(td_last).after($(td_add));
 			}
			// eco利用しないチェック
			$('#'+sqnc+'eco_0').prop('checked', true);
			// 閉じる
			eco_click(sqnc)
 		//}
	});

	var chng_ldng_date = post_json('/Ajax/chng_ldng_date',
	    {'htl_code'  : $('input:hidden[name="hddn_htl_code"]').val(),
	     'checkin'   : hddn_checkin,
	     'stays'     : hddn_stays,
	    }
	);
	chng_ldng_date.done(function (ret) {

	    if (ret.val['rslt'] == 'dayuse_not_found') {
	      alert('選択した日程で日帰りのお部屋が見つかりませんでした。');
	      return false;
	    }

	    var plan_code = $('#slct_plan > option:selected').val();
	    $('#plan_list_info').empty();
	    $('#plan_list_info').append(ret.val['plan_div']);
	    if (plan_code && $('#slct_plan').children("option[value=" + plan_code + "]").length > 0) {
	      $('#slct_plan').val(plan_code);
	    }
	    $('p[id="checkin_stays"]').text(ret.val['date_stays']);
	    $('input:hidden[name="hddn_checkin"]').val(hddn_checkin);
	    $('input:hidden[name="hddn_stays"]').val(hddn_stays);
	    close_modal(modal_id);
	    if (ret.val['rslt'] == 'plan_changed') {
	      alert('日程が変更されたためプランがクリアされました。');
	    }
	    set_plan_overview(false, false);
	    return false;

	});
	chng_ldng_date.fail(function(xhr, ajaxOptions, thrownError) {
	  ajax_fail_console(xhr, ajaxOptions, thrownError);
	  close_modal(modal_id);
	  return false;
	});

	// 自動クーポン利用可能表示設定
	disp_cpn_auto_row(hddn_checkin,hddn_stays);

	return false;
}

function nights() {
    var minStys = 1;
  var maxStys = 7;
  var maxDate = new Date('2025-09-21');
  var slctDate = new Date($('#datepicker').val());

  var difftime = maxDate.getTime() - slctDate.getTime();
  var dayDiffTime = difftime / (1000 * 60 * 60 * 24);
  var dayDiff = Math.floor(dayDiffTime) + 1;
  if (dayDiff < maxStys) {
    maxStys = dayDiff;
  }

  var bfrVal = parseInt($('#stays').val());

  // 泊数ドロップダウン要素の消去
  $('#stays').empty();

  // 泊数ドロップダウン生成
  for (var i=minStys; i <= maxStys; i++) {
    $('#stays').append($('<option value="' + i + '">' + i + '泊</option>'));
  }

  // 泊数セレクト値の保証（優先順位　変更前選択値　＞　最大泊数）
  var slctVal = (maxStys >= bfrVal) ? bfrVal : maxStys;

  // 泊数セレクト
  $('#stays').val(slctVal);
 }

$(function() {
	nights();
});

</script>
<!-- モーダル・ダイアログ -->
<div class="modal fade" id="schedule" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary">ご宿泊日・泊数の変更</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					<section>
                                                <p>変更するとプラン・オプションのご入力内容がクリアされます。</p>
                        						<div class="form-group">
							<label class="col-sm-2 control-label" for="InputPassword">チェックイン</label>
							<div class="col-sm-4"><input type="text" name="checkin_schedule" value="" id="datepicker" class="form-control form-datepicker" readonly="1" onchange="nights();" data-date-language="ja" data-date-start-date="2025-03-21" data-date-end-date="2025-09-21" placeholder="日付を入力">
</div>						</div>
						<div class="form-group"><label for="stays" class="col-sm-2 control-label">泊数</label><div class="col-sm-2"><select id="stays" name="stays" class="form-control"><option value="1">1泊</option><option value="2">2泊</option><option value="3">3泊</option><option value="4">4泊</option><option value="5">5泊</option><option value="6">6泊</option><option value="7">7泊</option></select>
</div></div>						<div class="form-group">
							<div class="col-sm-offset-2 col-sm-10">
								<button type="button" id="btn_cancel" class="btn btn-lg btn-blue mr10" onclick="close_modal('#schedule');">キャンセル</button>
								<button type="button" id="btn_change" class="btn btn-lg btn-orange" onclick="schedule_close_modal_update('#schedule');">変更する</button>
							</div>
						</div>
					</section>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->
<style>
.txtAlgnL{
    text-align: left !important;
}
.txtAlgnR{
    text-align: right !important;
}
.tdLineH{
	line-height:160% !important;
}
</style>
<script>
//コールバック用のクラスを定義
var callback_modal_room_detail = function() {
	// ホテルList取得
	this.get_room_detail_charge = function(p_no) {
		var data = post_json('/Ajax/get_room_detail_charge',
				{'seq' : p_no,}
		);
		data.done(function (ret) {
			if (ret.val != ""){
				var biz_packs = {"020":"\u30d3\u30b8\u30cd\u30b9\u30d1\u30c3\u30af100","021":"\u30d3\u30b8\u30cd\u30b9\u30d1\u30c3\u30af200","022":"\u30d3\u30b8\u30cd\u30b9\u30d1\u30c3\u30af300"};
				// 部屋タイプ,宿泊人数,VOD料金,Biz料金,合計料金
				$('#room_type_room_detail').text(ret.val['room_type_name']);
				$('#num_of_guests_room_detail').text(ret.val['lodgers']);
				$('#vod_charge').text(ret.val['vod_chrg']);
 				if (ret.val['biz_type'] != ""){
 	 				$('#bsnss_pack_lbl').text(biz_packs[ret.val['biz_type']]);
 				}
				$('#bsnss_pack_charge').text(ret.val['biz_chrg']);
				$('#goto_charge').text("- " + ret.val['ttl_cpn_amnt']);
				$('#web_cpn_charge').text("- " + ret.val['ttl_web_cpn_amnt']);
				$('#total_charge').text(ret.val['ttl_chrg_dsct']);
                if (ret.val['plan_name']) {
                  $('#plan_name').text(ret.val['plan_name']);
                  $('#div_plan_name').show();
                } else {
                  $('#div_plan_name').hide();
                }

				// 選択オプションのrowspan,先頭tr取得及び設定
				set_selected_option_th_tr_colsapn(ret.val);
				// Webクーポン欄の表示/非表示
				tr_show_hide_row(ret.val, 'web_cpn');
				// 日付明細全削除
				$('tr[id ^= day_tr_]').each(function(idx, elm){
					$(elm).remove();
				});
				// 日付明細Listから日付の逆順で、先頭へ追加
 				var day_list = ret.val['day_list'];
 				var day_list_cnt = Object.keys(day_list).length;
 				for(let idx in day_list) {
 	 				var day_idx = day_list_cnt + 1 - idx;
					var day_val=day_list[day_idx];
					var day_eco = (day_val['eco'] == true) ? '<br>(連泊ECOプランを利用する)' : ''
					var day_chrg_dsct = (day_val['stay_tax_flag'] == true) ? (day_val['chrg_dsct_wtht_stay_tax'] + '<br>宿泊税&nbsp;&nbsp;' + day_val['stay_tax'] + '<br>合計&nbsp;&nbsp;' + day_val['chrg_dsct']) : day_val['chrg_dsct']

					var chrg = day_val['chrg_dsct'];				// 宿泊料
					var stay_tax = day_val['stay_tax'];				// 宿泊税
					var web_cpn_amnt = day_val['web_cpn_amnt'];		// Webクーポン額
					var chrg_ttl = day_val['chrg_dsct'];			// 合計
					var stay_tax_flag = day_val['stay_tax_flag'];	// 宿泊税フラグ
					var web_cpn_flag = day_val['web_cpn_flag'];		// Webクーポンフラグ

					// 宿泊料初期値
					var day_chrg_dsct = chrg_ttl;
					// 宿泊税抜を設定
					//if (stay_tax_flag == true){
						chrg = day_val['chrg_dsct_wtht_stay_tax'];
					//}
					// 合計有 format
					if (stay_tax_flag == true || web_cpn_flag == true){
						day_chrg_dsct = chrg;
						if (stay_tax_flag == true){
							day_chrg_dsct += '<br>宿泊税&nbsp;&nbsp;' + stay_tax;
						}
						if (web_cpn_flag == true){
							day_chrg_dsct += '<br>Webクーポン&nbsp;&nbsp;' + web_cpn_amnt;
						}
						day_chrg_dsct += '<br>合計&nbsp;&nbsp;' + chrg_ttl;
					}

					$("#room_detail_tbody").prepend(
						$("<tr id='day_tr_"+day_idx+"'></tr>")
							.append($('<th></th>').html(day_idx))
							.append($('<td class="tdLineH" colspan="2"></td>').html(day_val['ymd']+day_eco))
							.append($('<td class="tdLineH"></td>').html(day_chrg_dsct))
					);
 				}
 				var tax_mssg = (ret.val['ttl_stay_tax_flag'] == true) ? ('※消費税/宿泊税込<br>' + ret.val['ttl_stay_tax_mssg']) : '※消費税込'
					$('#tax_mssg').html(tax_mssg);
                show_modal('#room_detail');
			}
		});
		data.fail(function(xhr, ajaxOptions, thrownError) {
			ajax_fail_console(xhr, ajaxOptions, thrownError);
		});
	}
};

//show modal
function room_detail_show_modal(no){
    var cllbck = new callback_modal_room_detail();
	cllbck['get_room_detail_charge'](no);
//     show_modal('#room_detail');
	return false;
}

// 選択オプションのrowspan,先頭tr取得及び設定
function set_selected_option_th_tr_colsapn(val){
	var ids = ['eco','vod','biz','child','goto'];
	var row_span = 0;
	var row_span_tr = '';
	for(key in ids) {
		var cnt_span_tr = tr_show_hide(val,ids[key],row_span,row_span_tr);
		row_span = cnt_span_tr[0];
		row_span_tr = cnt_span_tr[1];
	}
	// 選択オプションの全thを削除
	for(key in ids) {
		$("#"+ids[key]+"_tr").children("th").remove();
	}
	// 先頭trへth追加
	//TODO: width chromeで有効にならない
	$("#"+row_span_tr).prepend($("<th colspan=2 rowspan="+row_span+" style='width:100px;'/>").html("選択したオプション"));
}

// tr show hide single row
function tr_show_hide_row(val, id){
	var tr_id = id + "_tr";
	if (val[id] == null || val[id] == 0 ){
		$("#"+tr_id).hide();
	}
}

// tr show hide
function tr_show_hide(val, id, cnt, span_tr){
	var tr_id = id + "_tr";
	if (val[id] == null || val[id] == 0 ){
		$("#"+tr_id).hide();
	}else{
		cnt++;
		if (span_tr == ''){
			span_tr = tr_id;
		}
		$("#"+tr_id).show();
	}
	return [cnt,span_tr];
}
</script>
<!-- モーダル・ダイアログ -->
<div class="modal fade" id="room_detail" tabindex="-1">
	<div class="modal-dialog" style="max-width: 700px;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary">料金詳細一覧</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
                    <div id="div_plan_name" class="form-group mb5 clearfix">
                      <label class="col-xs-2 control-label" for="plan_name">プラン</label>
                      <label class="col-xs-10 control-label fwNormal" id="plan_name">sample plan</label>
                    </div>
					<div class="form-group mb5 clearfix">
						<label class="col-xs-2 control-label" for="room_type_room_detail">部屋タイプ</label>
						<label class="col-xs-10 control-label fwNormal" id="room_type_room_detail">sample room type</label>
					</div>
					<div class="form-group mb5 clearfix">
						<label class="col-xs-2 control-label" for="num_of_guests_room_detail">宿泊人数</label>
						<label class="col-xs-10 control-label fwNormal" id="num_of_guests_room_detail">1 person</label>
					</div>

					<table class="table table-responsive table-bordered room_detail_option">
						<colgroup>
							<col width="5%">
							<col width="20%">
<!-- 						<col width="40%"> -->
<!-- 						<col width="35%"> -->
							<col width="35%">
							<col width="40%">
						</colgroup>
						<thead>
							<tr>
								<th style="width:40px;">No</th>
								<th colspan="2">宿泊日</th>
								<th>料金</th>
							</tr>
						</thead>
						<tbody id="room_detail_tbody">
							<tr id="day_tr_1">
								<th>1</th>
								<td class="tdLineH">2020-12-30(sun)</td>
								<td colspan="2">5,325</td>
							</tr>
							<tr id="eco_tr">
<!-- 								<th colspan=3 rowspan=3>選択したオプション</th> -->
<!-- 								<th colspan=3>選択したオプション</th> -->
								<td class="tdLineH">連泊ECOプラン</td>
								<td class="tdLineH" id="eco_charge">※上記料金にて計算済み</td>
							</tr>
							<tr id="vod_tr">
<!-- 								<th colspan=3>選択したオプション</th> -->
								<td class="tdLineH">VOD</td>
								<td class="tdLineH" id="vod_charge">￥2,000</td>
							</tr>
							<tr id="biz_tr">
<!-- 								<th colspan=3>選択したオプション</th> -->
								<td class="tdLineH" id="bsnss_pack_lbl">ビジネスパック500</td>
								<td class="tdLineH" id="bsnss_pack_charge">￥9,000</td>
							</tr>
							<tr id="child_tr">
<!-- 								<th colspan=3>選択したオプション</th> -->
								<td class="tdLineH">お子様添い寝</td>
								<td class="tdLineH" id="chld_charge"></td>
							</tr>
							<tr id="goto_tr">
<!-- 								<th colspan=3>選択したオプション</th> -->
								<td class="tdLineH">Go To トラベル</td>
								<td class="tdLineH" id="goto_charge"></td>
							</tr>
							<tr id="web_cpn_tr">
								<th colspan="3">Webクーポン</th>
								<td class="tdLineH" id="web_cpn_charge" style="color:red;">￥1,000</td>
							</tr>
							<tr id="ttl_tr">
								<th colspan="3">合計</th>
								<td class="tdLineH" id="total_charge" style="font-weight: bold;">￥14,800</td>
							</tr>
						</tbody>
					</table>
					<div class="alR mb15 mr10">
						<span id="tax_mssg"></span>
					</div>
					<div class="form-group">
						<div class="col-sm-offset-4 col-sm-8">
							<button type="button" id="btn_close" class="btn btn-lg btn-blue" onclick="close_modal('#room_detail');">閉じる</button>
						</div>
					</div>

				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->



<script>
// show modal
function club_card_show_modal(sqnc){
	$('input:hidden[name="hddn_sqnc_club_card"]').val(sqnc);

	if( $('#membership_number_club_card_entry').length ) {
		if ( $('#membership_number_club_card_entry').val().length > 0 ) {
			// 会員カードの『番号』を空にする
			$('#membership_number_club_card_entry').val('');
		}
	}

	if( $('#last_name_club_card_entry').length ) {
		if ( $('#last_name_club_card_entry').val().length > 0 ) {
			// 会員カードの『姓』を空にする
			$('#last_name_club_card_entry').val('');
		}
	}

	if( $('#first_name_club_card_entry').length ) {
		if ( $('#first_name_club_card_entry').val().length > 0 ) {
			// 会員カードの『名』を空にする
			$('#first_name_club_card_entry').val('');
		}
	}

    show_modal('#club_card');
	return false;
}
</script>
<style>
.boxError {
	background-color: #fff3f3;
	margin-top: 5px;
	padding: 10px 15px;
	color: #d82c2c;
	max-width: 630px;
}
.h3_modal {
	font-size: 2.4rem;
	margin-top: 20px;
	margin-bottom: 10px;
}
@media screen and (max-width: 767px) {
	.h3_modal {
		font-size: 1.8rem;
		margin-top: 15px;
		margin-bottom: 7px;
	}
}

ul.clubcardIcoLst {
	list-style: none;
	margin-bottom: 0px;
	padding-left: 0px;
}
[class*="clubcardIcoLst"] {
	margin-top: 1.5em;
}
[class*="clubcardIcoLst"] > li {
    margin-top: 0.5em;
}
[class*="clubcardIcoLst"] > li:first-child {
	margin-top: 0;
}

.clubcardIcoLst > li > a[target="_blank"],
.clubcardIcoLst > a[target="_blank"] {
	padding-right: 20px;
}
.clubcardIcoLst > li > a[target="_blank"]:after,
.clubcardIcoLst > li > a[target="_blank"]:after,
.clubcardIcoLst > a[target="_blank"]:after {
	position: absolute;
	content: "";
	right: 2px;
	top: 3px;
	display: inline-block;
	width: 15px;
	height: 12px;
	background: url(/img/common/com_ic11.png) 0 50% no-repeat;
}
.clubcardIcoLst > li > a,
.clubcardIcoLst > a  {
	display: inline-block;
	padding-left: 15px;
	position: relative;
}

.clubcardIcoLst > li > a:link    { color: #0b58bb; text-decoration: none; }
.clubcardIcoLst > li > a:visited { color: #0b58bb; text-decoration: none; }
.clubcardIcoLst > li > a:hover   { color: #0b58bb; text-decoration: underline; }
.clubcardIcoLst > li > a:hover   { color: #5793ce; text-decoration: underline; }
.clubcardIcoLst > li > a:active  { color: #0b58bb; text-decoration: underline; }

.clubcardIcoLst > li > a:before,
.clubcardIcoLst > a:before  {
	content: "";
	display: inline-block;
	margin-right: 7px;
	height: 6px;
	width: 6px;
	border-right: 1px solid #888888;
	border-bottom: 1px solid #888888;
	-moz-transform: rotate(-45deg);
	-webkit-transform: rotate(-45deg);
	transform: rotate(-45deg);
	position: absolute;
	top: 6px;
	left: 0px;
}

.xs-mt20 { }
@media screen and (max-width: 767px) {
	.xs-mt20 {
		margin-top: 20px;
	}
}
</style>

<!-- モーダル・ダイアログ -->
<div class="modal fade" id="club_card" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary">会員認証</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					
<input type="hidden" name="hddn_sqnc_club_card" value="">
					<section>
						<h3 class="h3_modal">カード選択</h3>
						<p>お客様がお持ちのカードをクリックしてください。</p>
						<div class="row">
							<section class="col-sm-6">
							<h3 class="h3_modal">東横INNクラブカード会員</h3>
								<div class="">
									<div class="dpInlBlock">
										<a href="javascript:void(0)" onclick="club_card_entry_show_modal('1')"><img class="img-responsive" src="/images/card_im01_new.jpg"></a>
									</div>
								</div>
							</section>
							<section class="col-sm-6">
							<h3 class="h3_modal dpInlBlock">ホスピタルインクラブカード会員</h3>
								<div class="">
									<a href="javascript:void(0)" onclick="club_card_entry_show_modal('8')"><img class="img-responsive" src="/images/card_im08_new.jpg"></a>
								</div>
							</section>
						</div>
						<div class="row">
							<section class="col-sm-6">
								<h3 class="h3_modal dpInlBlock">【新デザイン】東横INNクラブカード会員</h3>
								<div class="">
									<a href="javascript:void(0)" onclick="club_card_entry_show_modal('9')"><img class="img-responsive" src="/images/card_im09.jpg"></a>
								</div>
							</section>
						</div>
					</section>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->
<script>
//コールバック用のクラスを定義
var callback_modal_club_card_entry = function() {
	// ホテルList取得
	this.get_card_type_info = function() {
		var data = post_json('/Ajax/get_card_type_info',
				{'card_type' : $('input:hidden[name="hddn_card_type_club_card_entry"]').val(),}
		);
		data.done(function (ret) {
			if (ret.val != ""){
				$('#card_type_club_card_entry_div').html(ret.val['html']);
				$('#card_img').attr('src',ret.val['img_url']);
				on_change_card_type($('#card_type_club_card_entry'));
			}
		});
		data.fail(function(xhr, ajaxOptions, thrownError) {
			ajax_fail_console(xhr, ajaxOptions, thrownError);
		});
	}
	// ホテルList取得
	this.check_membership_number = function() {
		var data = post_json('/Ajax/check_membership_number',
				{'card_type'		: $('#card_type_club_card_entry').val(),
				 'membership_number': $('#membership_number_club_card_entry').val(),
				 'last_name'		: $('#last_name_club_card_entry').val(),
				 'first_name'		: $('#first_name_club_card_entry').val(),
				 'membership_link'	: ($('#membership_link').val() === void 0) ? 0 : 1,
				 'compare_last_name_alpha' : ($('#last_name_alpha').val() === void 0) ? '' : $('#last_name_alpha').val(),
        		 'compare_first_name_alpha' : ($('#first_name_alpha').val() === void 0) ? '' : $('#first_name_alpha').val(),
        		 'compare_membership' : ($('#compare_membership').val() === void 0) ? 0 : 1,
				 }
		);
		data.done(function (ret) {
			if (ret.val.errrCode != ""){
				if (ret.val.errrCode == 'BCMN0000'){
					club_card_complete_show_modal(ret.val.uid);
				} else if (ret.val.errrCode == 'BCMN9998'){
					// 姓名不一致エラー
					alert('お客様が入力したお名前アルファベットと\n会員情報の入力で入力した姓名が一致しませんでした。\n会員番号・氏名をご確認の上、再度お試しください。');
				} else if (ret.val.errrCode == 'BCMN9999'){
					// 紐付け済みエラー
					alert('入力した会員番号は既に登録済みです。\n会員番号・氏名をご確認の上、再度お試しください。');
				} else {
					// 認証エラー
					alert('お客様の情報を確認できませんでした。\n会員番号・氏名をご確認の上、再度お試しください。');
				}
			}
		});
		data.fail(function(xhr, ajaxOptions, thrownError) {
			ajax_fail_console(xhr, ajaxOptions, thrownError);
		});
	}

};


//show modal
function club_card_entry_show_modal(card_type){
// 	$('input:hidden[name="hddn_mmbrshp_nmbr_club_card_entry"]').val($('input:hidden[name="hddn_mmbrshp_nmbr_club_card"]').val());
 	$('input:hidden[name="hddn_card_type_club_card_entry"]').val(card_type);
    var cllbck = new callback_modal_club_card_entry();
	cllbck['get_card_type_info']();
	// on change card type
 	on_change_card_type($('#card_type_club_card_entry'));
	show_modal('#club_card_entry');
  	close_modal('#club_card');
 	return false;
}

// close modal with update
function club_card_entry_close_modal_update(){
    update_club_card_entry();
  	close_modal('#club_card_entry');
	return false;
}

// on change card type
function on_change_card_type(_this){
	var card_type = $(_this).val();
	console.log(' card_type: ' +  card_type);
	var nmbr1_size = 5 - (card_type.length);
	var maskfrmt = "9999-999999";
	var plchldr  = "1234-123456";
	console.log(' nmbr1_size: ' +  nmbr1_size);
	if (nmbr1_size < 4){
		maskfrmt = "999-999999";
		plchldr  = "123-123456";
	}
 	$('#membership_number_club_card_entry').mask(maskfrmt, {placeholder:plchldr});
}

// update checkin stays
function update_club_card_entry(){
	// 属性チェック
	var card_type = $('#card_type_club_card_entry').val();

	// TODO:カードタイプ毎の属性チェック

    var cllbck = new callback_modal_club_card_entry();
	cllbck['check_membership_number']();
	return false;
}
</script>
<!-- モーダル・ダイアログ -->
<div class="modal fade" id="club_card_entry" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary">会員認証</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					
<input type="hidden" name="hddn_card_type_club_card_entry" value="">
					<h3>会員情報の入力</h3>

					<div class="form-group">
						<div class="col-sm-4">
							<img id="card_img" class="img-responsive" src="/images/card_im01_new.jpg">
						</div>
						<div class="col-sm-8">
							<div class="form-group">
								<label class="col-sm-2 control-label" for="InputSelect">会員番号</label>
								<div class="col-sm-2" id="card_type_club_card_entry_div">
									<select id="card_type_club_card_entry" name="card_type_club_card_entry" class="form-control" onchange="on_change_card_type(this)">
<option value="I">I</option>
</select>
								</div>
								<div class="col-sm-8"><input type="text" name="membership_number_club_card_entry" value="" id="membership_number_club_card_entry" class="form-control" maxlength="11" placeholder="1234">
</div>								<!-- 								<div class="col-sm-1">―</div> -->
															</div>
							<div class="form-group">
								<label class="col-sm-2 control-label" for="last_name_club_card_entry">姓</label>
								<div class="col-sm-10"><input type="text" name="last_name_club_card_entry" value="" id="last_name_club_card_entry" class="form-control" maxlength="50" placeholder="">
</div>							</div>
							<div class="form-group">
								<label class="col-sm-2 control-label" for="first_name_club_card_entry">名</label>
								<div class="col-sm-10"><input type="text" name="first_name_club_card_entry" value="" id="first_name_club_card_entry" class="form-control" maxlength="50" placeholder="">
</div>							</div>
						</div>
					</div>

					<div class="form-group">
						<div class="col-sm-offset-4 col-sm-8">
							<button type="button" id="btn_cancel_club_card_entry" class="btn btn-lg btn-blue mr10" onclick="close_modal('#club_card_entry');">キャンセル</button>
							<button type="button" id="btn_change_club_card_entry" class="btn btn-lg btn-orange" onclick="club_card_entry_close_modal_update();">確認画面へ</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->
<script>
// show modal
function club_card_complete_show_modal(uid){
	var card_type 			= $('#card_type_club_card_entry').val();
	var membership_number	= $('#membership_number_club_card_entry').val();
	var last_name			= $('#last_name_club_card_entry').val();
	var first_name			= $('#first_name_club_card_entry').val();
	$('#membership_number_club_card_complete').text(card_type + membership_number);
	$('input:hidden[name="membership_number_club_card_uid_complete"]').val(uid);
	$('#last_name_club_card_complete').text(last_name);
	$('#first_name_club_card_complete').text(first_name);
	show_modal('#club_card_complete');
  	close_modal('#club_card_entry');
 	return false;
}

// close modal with update
function club_card_complete_close_modal_update(){
    update_club_card_complete();
  	close_modal('#club_card_complete');
	return false;
}

// update parent form
function update_club_card_complete(){
	var hddn_sqnc = $('input:hidden[name="hddn_sqnc_club_card"]').val();
	var val = $('#membership_number_club_card_complete').text();
	var uid = $('input:hidden[name="membership_number_club_card_uid_complete"]').val();
	var last_name = $('#last_name_club_card_complete').text();
	var firs_name = $('#first_name_club_card_complete').text();
	//var rgst = $('#club_card_cardregist').prop('checked') ? '1' : '0';
	console.log('hddn_sqnc: '+ hddn_sqnc + ' val: '+ val);

	// 姓名の設定
	set_club_card_mmbrshp_name(hddn_sqnc, last_name, firs_name);
	// 会員入力ボタン非表示、会員番号ラベル表示
	set_club_card_mmbrshp_nmbr(hddn_sqnc,val,uid);

	$('#'+hddn_sqnc+'reset_mmbrshp_nmbr').show();		// ボタン『宿泊者名変更』を表示
	return false;
}

</script>
<!-- モーダル・ダイアログ -->
<div class="modal fade" id="club_card_complete" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary">会員認証</h4>
			</div>
			<div class="modal-body">
				<form class="form-horizontal">
					<h3>会員情報の確認</h3>
					<p>お客様の情報が確認出来ました。</p>
					
<input type="hidden" name="membership_number_club_card_uid_complete" value="">

					<div class="form-group">
						<label class="col-sm-2 control-label" for="membership_number_club_card_complete">会員番号</label>
						<label class="col-sm-8 control-label" id="membership_number_club_card_complete"></label>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label" for="last_name_club_card_complete">姓</label>
						<label class="col-sm-8 control-label" id="last_name_club_card_complete"></label>
					</div>
					<div class="form-group">
						<label class="col-sm-2 control-label" for="first_name_club_card_complete">名</label>
						<label class="col-sm-8 control-label" id="first_name_club_card_complete"></label>
					</div>

<!-- 					<div class="form-group"> -->
<!-- 						<div class="checkbox"> -->
<!-- 							<label> -->
<!-- 								<input type="checkbox" id="club_card_cardregist" name="cardregist" value="今回使用するカード情報を登録する。">{LBL_REGISTER_MEMBER_INFORMATION_IN_ACCOUNT} -->
<!-- 							</label> -->
<!-- 						</div> -->
<!-- 					</div> -->

					<div class="form-group">
						<div class="col-sm-offset-2 col-sm-10">
							<button type="button" id="btn_change_club_card_complete" class="btn btn-lg btn-orange" onclick="club_card_complete_close_modal_update();">OK</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->

<style>
.credit .credit-icons ul {
    display: flex;
    list-style-type: none;
    padding: 0 0 0 5px;
    margin: 0; }
    @media only screen and (max-width: 767px) {
      .credit-icons ul {
        padding: 0;
        margin: 10px 0 0; }
}
.credit .credit-icons img {
    display: block;
    margin: auto;
    width: calc( 100% - 10px);
}

.dsp_none {
    display: none;
}

</style>


<script>
///////////////////////////////////////////////////////////////////////
// PHP側とtoyoko_credit.jsでデータの連携を行いたい場合は以下に記述する
///////////////////////////////////////////////////////////////////////

var systemId = '1';
var apiKey = 'i1ajBe0E+';
var htl_lcl_id = 'ja';
var lclId = 'ja';
var cpay_err_msg = 'カード情報の取得に失敗しました。カード情報をご確認の上、再度お試しください。';
var lbl_ttl = '';
var lbl_on = 'クレジットカード欄を入力';
var lbl_off = 'クレジットカード欄を閉じる';
var req_url = '/Reservation/entry';
var is_reserve = req_url.indexOf('Reservation') > 0 ? true : false;
var oc_advnc_pymnt_dsply_flag = is_reserve ? '1' : '0';
var scrty_code_dsply_flag = is_reserve ? '1' : '0';
var crt_display_flag = is_reserve ? '0' : '0';
var input_card_cmpny_1 = 'カード会社名を入力してください。';
var input_card_nmbr_1 = 'カード番号の長さは14文字以上である必要があります。';
var input_card_nmbr_2 = 'カード番号は数字を入力してください。';
var input_card_expr_date_1 = '有効期限-月を入力してください。';
var input_card_expr_date_2 = '有効期限-年を入力してください。';
var input_card_expr_date_3 = '有効期限の年月が不正です。';
var input_card_expr_date_4 = '有効期限がチェックイン日より前になっています。再入力して下さい。';
var input_card_name_1 = '名義人を入力してください。';
var input_card_name_2 = '名義人はアルファベットを入力してください。';
var input_card_name_3 = '名義人は20文字以下で入力してください。';
var input_card_scrty_code_1 = 'セキュリティコードを入力してください。';
var input_card_scrty_code_2 = 'セキュリティコードは数字を入力してください。';
var input_card_scrty_code_3 = 'セキュリティコードは4文字以下で入力してください。';

</script>
<!-- モーダル・ダイアログ -->
<div class="modal fade" id="modal_select_payment" tabindex="-1">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span>×</span></button>
				<h4 class="modal-title text-primary"></h4>
			</div>
			<div class="modal-body">
				<!-- エラーメッセージ -->
								
				<form class="form-horizontal">
					<input type="hidden" id="card_token_list_count" name="card_token_list_count" value="0">
					<input type="hidden" id="card_type_code" name="card_type_code" value="">
					<input type="hidden" id="onln_card_tkn" name="onln_card_tkn" value="">
					<input type="hidden" id="mask_card_no" name="mask_card_no" value="">
					<input type="hidden" id="last_fr_dgts" name="last_fr_dgts" value="">
					<input type="hidden" id="card_type_name" name="card_type_name" value="">
					<input type="hidden" id="errr_code" name="errr_code" value="">
					<input type="hidden" id="card_select" name="hd_card_select" value="">
					<input type="hidden" id="payment" name="hd_payment" value="2">
					<input type="hidden" name="cardregist">

					<!-- 支払方法 -->
					<div class="clearfix" id="payment_div">
						<label class="col-sm-2 control-label" for="SelectPayment">支払方法</label>
						<div class="col-sm-10">
							<div class="form-group"><div class="payment clearfix"><select id="modal_payment" name="modal_payment" class="form-control" style="width: 40%;">
<option value="2" selected="selected">現地本人払い</option>
</select>
</div></div>						</div>
					</div>

					<!-- クレジットカード情報欄 -->
					<div id="modal_output_card_info">
    					<div id="modal_reserve_credit_card_info_msg">
						    					</div>
						<!-- 登録済カード一覧 -->
												<div id="modal_radio_card_select_new_area">
															<!-- --------------------------------------- -->
								<!--  今回のご宿泊ではじめてご利用するカード -->
								<!-- --------------------------------------- -->
								<div class="col-sm-2"></div>
								<div class="mb10">
									<label class="radio-inline col-sm-10 active"><input type="radio" name="card_select" value="-1" checked="checked" id="modal_radio_card_select_new">
今回のご宿泊ではじめてご利用するカード</label>								</div>
													</div>
					</div>

					<!-- オンライン決済（会社名義）の場合に表示 -->
										<div class="clearfix dsp_none" id="modal_output_card_info_corp">
											</div>

					<div id="modal_credit_card_input_info" class="dsp_none">
						<label class="col-sm-2 control-label" id="lbl_credit_card_info">新規に追加するクレジットカード情報</label>
						<!-- ------------ -->
						<!-- カード入力欄 -->
						<!-- ------------ -->
						<div class="clearfix credit">
							<div class="col-sm-10" id="modal_card_input_info">
								<div class="boxError" id="modal_cardErrorMessage"></div>
								<span class="help-block">カード番号</span>
								<div class="form-group has-feedback form-inline">
																			<input type="text" class="form-control w40per col-sm-4" id="InputCardNumber" name="InputCardNumber" placeholder="例)0000000000000000">
										<div class="credit-icons">
											<ul>
																							<li><img src="/img/common/601.gif"></li>
																							<li><img src="/img/common/602.gif"></li>
																							<li><img src="/img/common/605.gif"></li>
																							<li><img src="/img/common/608.gif"></li>
																							<li><img src="/img/common/611.gif"></li>
																						</ul>
										</div>
										<div class="help-block with-errors"></div>
																	</div>
								<span class="help-block">有効期限</span>
								<div class="row">
									<div class="form-inline">
										<div class="col-sm-2">
											<div class="form-group "><div class=" clearfix"><select id="card_expr_mnth" name="card_expr_mnth" class="form-control">
<option value="" selected="selected">未選択</option>
<option value="01">01</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
</select>
</div></div>											<label class="sub-item"><span>　</span>月</label>
										</div>
										<div class="col-sm-2">
											<div class="form-group "><div class=" clearfix"><select id="card_expr_year" name="card_expr_year" class="form-control">
<option value="" selected="selected">未選択</option>
<option value="2025">2025</option>
<option value="2026">2026</option>
<option value="2027">2027</option>
<option value="2028">2028</option>
<option value="2029">2029</option>
<option value="2030">2030</option>
<option value="2031">2031</option>
<option value="2032">2032</option>
<option value="2033">2033</option>
<option value="2034">2034</option>
</select>
</div></div>											<label class="sub-item"><span>　</span>年</label>
										</div>
									</div>
								</div>
								<span class="help-block">名義人</span>
								<div class="form-group"><div class="clearfix w40per"><input type="text" name="nominee" value="" id="nominee" class="form-control" placeholder="例)HANAKO TOYOKO">
</div></div>							</div>
						</div>
					</div>

											<!-- -------------------- -->
						<!--  セキュリティコード  -->
						<!-- -------------------- -->
						<div id="modal_id_scrty_code">
							<span class="col-sm-2"></span>
							<div class="col-sm-10 control-label">セキュリティコード</div>
							<span class="col-sm-2"></span>
							<div class="form-group col-sm-10 "><div class="clearfix"><input type="text" name="modal_card_scrty_code" value="" id="modal_card_scrty_code" class="form-control" style="width: 20%;">
</div></div>						</div>
					
					<div id="modal_card_regist_info" class="dsp_none">
						<!-- ------------------------------------ -->
						<!--  今回使用するカード情報を登録する。  -->
						<!-- ------------------------------------ -->
													<span class="col-sm-2"></span>
							<div class="checkbox col-sm-10">
								<label><input type="checkbox" name="cardregist" value="1" id="cardregist">
今回使用するカード情報を登録する。</label>							</div>
											</div>

					<div class="col-sm-12"><span>　</span></div>

					<!-- ボタン -->
					<div class="form-operation">
						<div class="clearfix">
							<div class="col-sm-6">
								<div class="btn-wrapper btn-arrow btn-arrow-left">
									<button type="button" id="Back" class="btn btn-blue" onclick="reset_input_card_all();close_modal('#modal_select_payment');redirect_to('/Reservation/entry/');">戻る</button>
								</div>
							</div>
							<div class="form-last col-sm-6">
								<div class="btn-wrapper btn-arrow btn-arrow-right">
									<button id="btn_next" type="button" class="btn btn-orange" onclick="modal_payment_check_to_submit();">予約実行</button>
								</div>
							</div>
						</div>
					</div>

				</form>
			</div>
		</div>
	</div>
</div>
<!-- モーダル・ダイアログ はここまで -->
		<footer class="footer bg-primary mt10 not_show_on_print">
			<div class="container">
				<p class="text-center">Copyright c Toyoko Inn Co.,Ltd. All rights reserved.</p>
			</div>
			<div id="pageTopBtn" class="not_show_on_print" style="display: none;"><a href="#header"><img src="/img/common/com_bt01.png" width="48" height="64" alt="TOP"></a></div>
		</footer> <!-- /footer -->
<!-- START #19760 チャットボット -->
<script type="text/javascript">
<!--
var vgHost='chat3-66.chatdealer.jp',vgProtocol='https',vgPort='443',vgAtxt='bwdqUChat3-66',vgSid=1;
(function(){try{
var ins=document.createElement('script'),dt=new Date,tg=document.getElementsByTagName('script')[0];
ins.type='text/javascript';ins.async=!0;ins.setAttribute('charset','utf-8');
ins.src=vgProtocol+'://'+vgHost+':'+vgPort+'/chat/client.js?'+dt.getTime();tg.parentNode.insertBefore(ins,tg);
}catch(e){console.log(e);}})();
//-->
</script>
<!-- END チャットボット -->
	
<iframe name="vgloadif1742552588164" src="https://chat3-66.chatdealer.jp:443/chat/webstorage_check.html?1742552588164&amp;ver=10.3.0.0&amp;modeno=2" style="margin: 0;padding: 0;border: 0;min-height: 1px;min-width: 1px;display: none;"></iframe><iframe id="vgdataMainFrm1742552588240" name="vgdataMainFrm1742552588240" allowtransparency="true" style="padding: 0px; min-height: 1px; min-width: 1px; margin: 0px; width: 90px; height: 304px; position: fixed; overflow: hidden; border: none; z-index: 2000000000; border-radius: 8px 0px 0px 8px; bottom: 20px; right: 0px; box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 20px; opacity: 1;" scrolling="no" frameborder="no" src="https://chat3-66.chatdealer.jp:443/chat/blank.html?ver=10.3.0.0&amp;modeno=2" class="chatdealer-main-frame"></iframe><iframe id="vgCtaFrm1742552588240" name="vgCtaFrm1742552588240" style="margin: 0;padding: 0;border: 0;min-height: 1px;min-width: 1px;width: 0px;height: 0px;position:fixed; bottom:0px; right:15px;overflow: hidden;border: none;z-index: 2000000002;display: none;" scrolling="no" frameborder="no" src=""></iframe><div id="vgCtaModalDivWrap"><div id="vgCtaModalDiv" style="width: 0px;height: 0px;position:fixed; bottom:0px; right:15px;overflow: hidden;border: none;z-index: 2000000001;display: none;"></div></div></body></html>